/*! For license information please see index.js.LICENSE.txt */
var NUGGET;(()=>{"use strict";var e={488:(e,t)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var i={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,o={};function a(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}function l(){}function c(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!==n(e)&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},l.prototype=a.prototype;var u=c.prototype=new l;u.constructor=c,r(u,a.prototype),u.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty},684:(e,t,n)=>{n(488)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{asset:()=>r,directory:()=>o,fonts:()=>x,mime:()=>a,project:()=>d,renderAnimation:()=>y});var e=function(e){return e.replaceAll("#","%23")},t={nowDirectory:"",loadPrevDirectory:function(){var e=t.nowDirectory.split("/"),n=e.slice(-e.length,-1);ipc.requestAllDir(n.join("/"))},add:function(t){var n=e(t);fetch("file://".concat(n)).then((function(e){return e.blob()})).then((function(e){var t=URL.createObjectURL(e),i=e.type.split("/")[0],r=document.querySelector("element-control");"image"==i?r.addImage(t,n):"video"==i?r.addVideo(t,n):"audio"==i&&r.addAudio(t,n)}))}};const r=t,o={select:function(){var e=document.querySelector("#projectFolder");window.electronAPI.req.dialog.openDirectory().then((function(t){e.value=t||"/";var n=String(e.value);window.electronAPI.req.filesystem.getDirectory(n).then((function(e){var t={},i=document.querySelector("asset-list"),r=document.querySelector("asset-browser");for(var o in i.nowDirectory=n,i.clearList(),r.updateDirectoryInput(n),e)if(Object.hasOwnProperty.call(e,o)){var a=e[o];a.isDirectory?i.getFolder(a.title):t[o]=a}for(var l in t)if(Object.hasOwnProperty.call(t,l)){var c=t[l];i.getFile(c.title)}}))}))}},a={mimeArray:{png:{type:"image"},jpg:{type:"image"},jpeg:{type:"image"},gif:{type:"image"},mp4:{type:"video"},mov:{type:"video"},avi:{type:"video"},wmv:{type:"video"},mpg:{type:"video"},mkv:{type:"video"},webm:{type:"video"},mp3:{type:"audio"},wav:{type:"audio"}},lookup:function(e){var t=e.split(".");return t.length<=1?{type:"unknown"}:this.mimeArray[t[t.length-1]]?{type:this.mimeArray[t[t.length-1]].type}:{type:"unknown"}}};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),l=new P(r||[]);return i(a,"_invoke",{value:T(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function p(){}function m(){}function y(){}var v={};s(v,o,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(L([])));g&&g!==t&&n.call(g,o)&&(v=g);var w=y.prototype=p.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,a,c){var u=h(e[i],e,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==l(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function T(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=h(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=h(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return m.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:m,configurable:!0}),m.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new x(f(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),s(w,u,"Generator"),s(w,o,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function u(e,t,n,i,r,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){u(o,i,r,a,l,"next",e)}function l(e){u(o,i,r,a,l,"throw",e)}a(void 0)}))}}var f=function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)},h={save:function(){var e=document.querySelector("#projectFile").value;if(console.log(e),""!=e)return h.saveProjectFile({projectDestination:e}),0;window.electronAPI.req.project.save().then((function(e){var t=e||"nonefile";if("nonefile"==t)return 0;h.saveProjectFile({projectDestination:t})}))},load:function(){new JSZip;var e=document.querySelector("element-timeline");if(1==e.isTimelineChange())return rendererModal.whenTimelineChanged.show(),document.querySelector("#whenTimelineChangedMsg").innerHTML="새 프로젝트 파일을 볼러오려면 에디터를 닫고 재실행해 주세요.",0;var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".ngt"),t.click(),t.addEventListener("change",(function(){e.resetTimelineData();var t=this.files[0].path;window.electronAPI.req.filesystem.readFile(t).then((function(n){JSZip.loadAsync(n).then((function(n){n.file("timeline.json").async("string").then(function(){var n=s(c().mark((function n(i){var r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=JSON.parse(i),n.next=3,e.patchTimeline(r);case 3:h.changeProjectFileValue({projectDestination:t});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}))}))}),!1)},saveProjectFile:function(e){var t=e.projectDestination,n=document.querySelector("element-timeline"),i=document.querySelector("element-timeline").timeline,r=Number(document.querySelector("#projectDuration").value),o=document.querySelector("element-control").previewRatio,a=new JSZip,l={videoDuration:r,previewRatio:o,videoDestination:t};a.file("timeline.json",JSON.stringify(i)),a.file("renderOptions.json",JSON.stringify(l)),a.generateAsync({type:"blob"}).then(function(){var e=s(c().mark((function e(i){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,i.arrayBuffer();case 3:e.t1=e.sent,r=(0,e.t0)(e.t1),window.electronAPI.req.filesystem.writeFile(t,r,"base64").then((function(e){console.log("saved!"),document.querySelector("toast-box").showToast({message:"프로젝트 저장 완료",delay:"2000"}),n.appendCheckpointInHashTable(),h.changeProjectFileValue({projectDestination:t})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changeProjectFileValue:function(e){var t=e.projectDestination;document.querySelector("#projectFile").value=t,document.querySelector("title").innerHTML="Nugget - ".concat(t)}};const d=h;var p=function(e){rendererUtil.showProgressModal(),document.querySelector("#progress").style.width="".concat(e,"%"),document.querySelector("#progress").innerHTML="".concat(Math.round(e),"%")},m={state:{animateElements:{},elements:void 0,options:void 0,numberOfRenderingRequired:0,renderingCount:0,renderingProgress:0},initAnimateElementState:function(e){var t=document.createElement("canvas");t.classList.add("d-none"),t.setAttribute("width","1920"),t.setAttribute("height","1080");var n=t.getContext("2d");m.state.animateElements[e]={renderFrameLength:0,savedFrameCount:0,isCombineFrames:!1,canvas:t,context:n}},render:function(e,t){console.log(e),m.state.elements=e,m.state.options=t,m.state.numberOfRenderingRequired=0;var n="".concat(t.videoDestinationFolder,"/renderAnimation");window.electronAPI.req.filesystem.mkdir(n,{recursive:!0}).then((function(t){for(var i in p(0),window.electronAPI.req.filesystem.emptyDirSync(n),e)if(Object.hasOwnProperty.call(e,i)){var r=e[i];if(0==r.hasOwnProperty("animation"))continue;if("image"!==r.filetype)continue;if(1==r.animation.position.isActivate){m.initAnimateElementState(i),m.state.numberOfRenderingRequired+=1;for(var o=m.renderFrame({elementId:i,elements:r}),a=0;a<o.length;a++)m.saveFrame({elementId:i,data:o[a],outputDir:n,frame:a})}}0==m.state.numberOfRenderingRequired&&m.renderOutput()}))},renderFrame:function(e){var t=e.elementId,n=e.elements,i=m.state.animateElements[t].canvas,r=m.state.animateElements[t].context,o=n.animation.position.allpoints,a=[];m.state.animateElements[t].renderFrameLength=o[0].length;for(var l=0;l<o[0].length;l++){r.clearRect(0,0,i.width,i.height);var c={x:o[0][l].y,y:l<o[1].length?o[1][l].y:o[1][o[1].length-1].y};m.drawImage(t,r,c),r.stroke(),a.push(i.toDataURL("image/png"))}return a},drawImage:function(e,t,n){var i=document.querySelector("element-control-asset[element-id='".concat(e,"']")).querySelector("img"),r=0+n.x,o=n.y,a=m.state.elements[e].width,l=m.state.elements[e].height;t.drawImage(i,r,o,a,l)},saveFrame:function(e){var t=e.data,n=e.outputDir,i=e.frame,r=e.elementId,o=t.substring("data:image/png;base64,".length),a="".concat(n,"/")+"frame-".concat(r,"-").concat(String(i+1).padStart(4,"0"),".png");window.electronAPI.req.filesystem.writeFile(a,o,"base64").then((function(e){m.state.animateElements[r].savedFrameCount+=1,m.state.animateElements[r].savedFrameCount>=m.state.animateElements[r].renderFrameLength&&0==m.state.animateElements[r].isCombineFrames&&(m.state.animateElements[r].isCombineFrames,m.combineFrame({elementId:r,outputDir:n}))}))},combineFrame:function(e){var t=e.elementId,n=e.outputDir,i="".concat(n,"/").concat(t,".webm");window.electronAPI.req.ffmpeg.combineFrame(n,t),window.electronAPI.res.render.finishCombineFrame((function(e,n){if(n!=t)return 0;m.state.elements[t].filetype="video",m.state.elements[t].isExistAudio=!1,m.state.elements[t].localpath=i,m.state.elements[t].trim={startTime:0,endTime:m.state.elements[t].duration},m.state.elements[t].height=1080,m.state.elements[t].width=1920,m.state.elements[t].location={x:0,y:50},m.state.elements[t].codec={video:"libvpx-vp9",audio:"default"},m.state.renderingCount+=1,m.state.renderingProgress=m.state.renderingCount/m.state.numberOfRenderingRequired*100,p(m.state.renderingProgress),m.state.renderingCount>=m.state.numberOfRenderingRequired&&m.renderOutput()}))},renderOutput:function(){console.log("REND processing"),window.electronAPI.req.render.outputVideo(m.state.elements,m.state.options)}};const y=m;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){b=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),l=new P(r||[]);return i(a,"_invoke",{value:T(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(L([])));g&&g!==t&&n.call(g,o)&&(m=g);var w=p.prototype=h.prototype=Object.create(m);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,a,l){var c=s(e[i],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function T(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=s(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=s(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,i(w,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(x.prototype),c(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new x(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),c(w,l,"Generator"),c(w,o,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function g(e,t,n,i,r,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}var w,S;const x={get:(w=b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.electronAPI.req.font.getLists().then((function(e){if(0==e.status)return 0;console.log(e)}));case 1:case"end":return e.stop()}}),e)})),S=function(){var e=this,t=arguments;return new Promise((function(n,i){var r=w.apply(e,t);function o(e){g(r,n,i,o,a,"next",e)}function a(e){g(r,n,i,o,a,"throw",e)}o(void 0)}))},function(){return S.apply(this,arguments)})};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function E(){E=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),l=new P(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(L([])));v&&v!==t&&n.call(v,o)&&(m=v);var b=p.prototype=h.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,a,l){var c=s(e[i],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==T(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function S(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=x(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=s(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=s(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,i(b,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new w(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),c(b,l,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function k(e,t,n,i,r,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){k(o,i,r,a,l,"next",e)}function l(e){k(o,i,r,a,l,"throw",e)}a(void 0)}))}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==T(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===T(r)?r:String(r)),i)}var r}function j(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}function q(e){var t=C();return function(){var n,i=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){var t="function"==typeof Map?new Map:void 0;return M=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return A(e,arguments,H(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,e)},M(e)}function A(e,t,n){return A=C()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&N(r,n.prototype),r},A.apply(null,arguments)}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var z=function(e){I(n,e);var t=q(n);function n(){var e;return P(this,n),(e=t.call(this)).blobThumbnail={},e.nowDirectory="",e}return j(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e}},{key:"template",value:function(){return'<div class="row px-2"> <p class="text-light mt-2 text-center">프로젝트 폴더를 지정한 후 표시됩니다.</p> <button class="btn btn-sm btn-default text-light" onclick="NUGGET.directory.select()">프로젝트 폴더 지정</button> </div>'}},{key:"getFile",value:function(e){var t=e.split("."),n=t.length;n<=2||t[n-1],this.querySelector("div").insertAdjacentHTML("beforeend",'<asset-file asset-name="'.concat(e,'"></asset-file>'))}},{key:"getFolder",value:function(e){var t=e.split(".").length;t<=2||splitedFilename[t-1],this.querySelector("div").insertAdjacentHTML("beforeend",'<asset-folder asset-name="'.concat(e,'"></asset-folder>'))}},{key:"clearList",value:function(){this.querySelector("div").innerHTML=""}},{key:"connectedCallback",value:function(){this.render()}}]),n}(M(HTMLElement)),D=function(t){I(a,t);var n,i,r,o=q(a);function a(){var e;return P(this,a),(e=o.call(this)).classList.add("col-4","d-flex","flex-column","bd-highlight","overflow-hidden","mt-1","asset"),e.filename=e.getAttribute("asset-name"),e.directory=document.querySelector("asset-list").nowDirectory,e}return j(a,[{key:"render",value:(r=O(E().mark((function t(){var n,i,r,o,a,l;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=NUGGET.mime.lookup(this.filename).type,i=e("file://".concat(this.directory,"/").concat(this.filename)),r=document.querySelector("asset-list"),"image"!=n){t.next=7;break}o=this.templateImage(i),t.next=21;break;case 7:if("video"!=n){t.next=20;break}if(!r.blobThumbnail.hasOwnProperty(i)){t.next=13;break}a=r.blobThumbnail[i],o=this.templateVideoThumbnail(a),t.next=18;break;case 13:return t.next=15,this.captureVideoThumbnail(i);case 15:l=t.sent,r.blobThumbnail[i]=l,o=this.templateVideoThumbnail(l);case 18:t.next=21;break;case 20:o=this.template(n);case 21:this.innerHTML=o;case 22:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"template",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t={video:"video_file",audio:"audio_file",unknown:"draft"};return'<span class="material-symbols-outlined icon-lg align-self-center"> '.concat(t[e],' </span>\n        <b class="align-self-center text-ellipsis-scroll text-light text-center">').concat(this.filename,"</b>")}},{key:"templateImage",value:function(e){return'<img src="'.concat(e,'" alt="" class="align-self-center asset-preview">\n        <b class="align-self-center text-ellipsis-scroll text-light text-center">').concat(this.filename,"</b>")}},{key:"templateVideoThumbnail",value:function(e){return'\n        <div class="position-relative align-self-center">\n        <img src="'.concat(e,'" alt="" class="align-self-center asset-preview w-100">\n        <span class="material-symbols-outlined position-absolute icon-center ">\n        play_arrow\n        </span>\n        </div>\n        \n        <b class="align-self-center text-ellipsis-scroll text-light text-center">').concat(this.filename,"</b>")}},{key:"handleClick",value:function(){NUGGET.asset.add("".concat(this.directory,"/").concat(this.filename))}},{key:"captureVideoThumbnail",value:(i=O(E().mark((function e(t){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){fetch("".concat(t)).then((function(e){return e.blob()})).then((function(t){var n=URL.createObjectURL(t),i=document.createElement("video");i.src=n,i.preload="metadata",i.onloadedmetadata=O(E().mark((function t(){var n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.createElement("canvas"),i.addEventListener("seeked",(function(){var t=i.videoWidth,r=i.videoHeight;n.width=t,n.height=r,n.getContext("2d").drawImage(i,0,0,n.width,n.height),n.toBlob((function(t){var n=document.createElement("img"),i=URL.createObjectURL(t);n.onload=function(){URL.revokeObjectURL(i)},e(i)}))})),i.currentTime=1;case 3:case"end":return t.stop()}}),t)})))}))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"connectedCallback",value:(n=O(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.render();case 2:this.addEventListener("click",this.handleClick.bind(this));case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this.handleClick)}}]),a}(M(HTMLElement)),B=function(e){I(n,e);var t=q(n);function n(){var e;return P(this,n),(e=t.call(this)).classList.add("col-4","d-flex","flex-column","bd-highlight","overflow-hidden","mt-1","asset"),e.foldername=e.getAttribute("asset-name"),e.directory=document.querySelector("asset-list").nowDirectory,e}return j(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e}},{key:"template",value:function(){return'<span class="material-symbols-outlined icon-lg align-self-center"> folder </span>\n        <b class="align-self-center text-ellipsis text-light text-center">'.concat(this.foldername,"</b>")}},{key:"handleClick",value:function(){ipc.requestAllDir("".concat(this.directory,"/").concat(this.foldername))}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("click",this.handleClick.bind(this))}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this.handleClick)}}]),n}(M(HTMLElement));function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==F(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===F(r)?r:String(r)),i)}var r}function U(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){var t="function"==typeof Map?new Map:void 0;return V=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return W(e,arguments,K(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,e)},V(e)}function W(e,t,n){return W=X()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Y(r,n.prototype),r},W.apply(null,arguments)}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(a,e);var t,n,i,r,o=(t=a,n=X(),function(){var e,i=K(t);if(n){var r=K(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return U(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).directory="",e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e}},{key:"template",value:function(){return'<div class="d-flex flex-row p-0 mt-2">\n        <button ref="arrowup" class="btn btn-transparent btn-sm"><span class="material-symbols-outlined icon-sm"> arrow_upward </span> </button>\n        <input ref="text" type="text" class="form-control" aria-describedby="basic-addon1" value="" disabled>\n        </div>'}},{key:"updateDirectoryInput",value:function(e){this.querySelector("div").querySelector("input[ref='text']").value=e}},{key:"clickPrevDirectoryButton",value:function(){if(this.directory=document.querySelector("asset-list").nowDirectory,""==this.directory)return 0;var e=this.directory.split("/"),t=e.slice(-e.length,-1);ipc.requestAllDir(t.join("/"))}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("div").querySelector("button[ref='arrowup']").addEventListener("click",this.clickPrevDirectoryButton.bind(this))}},{key:"disconnectedCallback",value:function(){this.querySelector("div").querySelector("button[ref='arrowup']").removeEventListener("click",this.clickPrevDirectoryButton)}}])&&G(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(V(HTMLElement));function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Q(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Q(r)?r:String(r)),i)}var r}function $(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ee(e){var t="function"==typeof Map?new Map:void 0;return ee=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return te(e,arguments,re(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},ee(e)}function te(e,t,n){return te=ne()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&ie(r,n.prototype),r},te.apply(null,arguments)}function ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(a,e);var t,n,i,r,o=(t=a,n=ne(),function(){var e,i=re(t);if(n){var r=re(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return $(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this)}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.classList.add("bg-dark","position-absolute","d-none"),this.style.left="0px",this.style.top="0px",this.style.width="100%",this.style.height="100%",this.style.zIndex="10000",this.style.opacity="80%",this.style.paddingTop="46vh",this.innerHTML=e}},{key:"template",value:function(){return'\n        <div class="row justify-content-center align-items-start">\n            <b class="col-12 align-self-center text-light position-fixed text-center">\n                여기에 파일을 드롭해주세요\n            </b>\n        </div>'}},{key:"handleDragEnter",value:function(){this.classList.remove("d-none")}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.classList.remove("d-none")}},{key:"handleDragLeave",value:function(){this.classList.add("d-none")}},{key:"handleDrop",value:function(e){var t=this;e.preventDefault();try{var n=e.dataTransfer.files[0].path;NUGGET.asset.add(n),this.classList.add("d-none")}catch(e){setTimeout((function(){t.classList.add("d-none")}),800)}}},{key:"connectedCallback",value:function(){this.render(),document.addEventListener("dragenter",this.handleDragEnter.bind(this)),document.addEventListener("dragover",this.handleDragOver.bind(this)),this.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.addEventListener("drop",this.handleDrop.bind(this))}},{key:"disconnectedCallback",value:function(){}}])&&Z(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(ee(HTMLElement));const ae={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var le,ce=new Uint8Array(16);function ue(){if(!le&&!(le="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return le(ce)}for(var se=[],fe=0;fe<256;++fe)se.push((fe+256).toString(16).slice(1));const he=function(e,t,n){if(ae.randomUUID&&!t&&!e)return ae.randomUUID();var i=(e=e||{}).random||(e.rng||ue)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(se[e[t+0]]+se[e[t+1]]+se[e[t+2]]+se[e[t+3]]+"-"+se[e[t+4]]+se[e[t+5]]+"-"+se[e[t+6]]+se[e[t+7]]+"-"+se[e[t+8]]+se[e[t+9]]+"-"+se[e[t+10]]+se[e[t+11]]+se[e[t+12]]+se[e[t+13]]+se[e[t+14]]+se[e[t+15]]).toLowerCase()}(i)};var de=function(e){var t="undefined",n={static:["image","text","png","jpg","jpeg"],dynamic:["video","audio","mp4","mp3","mov"]};for(var i in n)if(Object.hasOwnProperty.call(n,i)&&n[i].indexOf(e)>=0){t=i;break}return t};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(){me=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),l=new k(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(m=v);var b=p.prototype=h.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,a,l){var c=s(e[i],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==pe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function S(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=x(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=s(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=s(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,i(b,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new w(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),c(b,l,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ye(e,t,n,i,r,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){ye(o,i,r,a,l,"next",e)}function l(e){ye(o,i,r,a,l,"throw",e)}a(void 0)}))}}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==pe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==pe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===pe(r)?r:String(r)),i)}var r}function we(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}function xe(e){var t=Oe();return function(){var n,i=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){var t="function"==typeof Map?new Map:void 0;return Ee=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ke(e,arguments,Le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pe(n,e)},Ee(e)}function ke(e,t,n){return ke=Oe()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Pe(r,n.prototype),r},ke.apply(null,arguments)}function Oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}var je=function(e){Se(o,e);var t,n,i,r=xe(o);function o(){var e;return be(this,o),(e=r.call(this)).elementControl,window.addEventListener("DOMContentLoaded",(function(){e.elementControl=document.querySelector("element-control")})),e.timeline={},e.timelineHashTable={},e.appendCheckpointInHashTable(),e.copyedTimelineData={},e.editGuideBreakPoint=[],e}return we(o,[{key:"generateHash",value:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}},{key:"getTime",value:function(){return Date.now()}},{key:"appendCheckpointInHashTable",value:function(){var e=JSON.stringify(this.timeline),t=this.generateHash(e),n=this.getTime();this.timelineHashTable[n]=t}},{key:"isTimelineChange",value:function(){var e=JSON.stringify(this.timeline),t=this.generateHash(e),n=Object.keys(this.timelineHashTable).length,i=Object.keys(this.timelineHashTable)[n-1];return t!=this.timelineHashTable[i]}},{key:"render",value:function(){var e=this.template();this.classList.add("col-12","cursor-default","h-100","line","bg-darker"),this.innerHTML=e}},{key:"template",value:function(){return'\n        <element-timeline-cursor></element-timeline-cursor>\n        <element-timeline-end></element-timeline-end>\n        <element-timeline-scroll></element-timeline-scroll>\n\n        \n        <div ref="elementLayer" style="margin-top: 24px;"></div>\n\n        '}},{key:"replaceTimelineBarHeight",value:function(e){this.querySelector(".timeline-bar").style.height="".concat(e,"px")}},{key:"getTimelineScrollHeight",value:function(){return this.scrollHeight}},{key:"patchTimeline",value:(i=ve(me().mark((function e(t){var n,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in this.timeline=t,this.elementControl.timeline=t,t)Object.hasOwnProperty.call(t,n)&&(i=t[n],this.patchElementInTimeline({elementId:n,element:i}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"patchElementInTimeline",value:(n=ve(me().mark((function e(t){var n,i,r,o,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.elementId,"image"!=(i=t.element).filetype){e.next=9;break}return e.next=4,this.getBlobUrl("file://".concat(i.localpath));case 4:r=e.sent,this.timeline[n].blob=String(r),this.elementControl.showImage(n),e.next=28;break;case 9:if("video"!=i.filetype){e.next=17;break}return e.next=12,this.getBlobUrl("file://".concat(i.localpath));case 12:o=e.sent,this.timeline[n].blob=String(o),this.elementControl.showVideo(n),e.next=28;break;case 17:if("text"!=i.filetype){e.next=22;break}document.querySelector("select-font").applyFontStyle({fontName:i.fontname,fontPath:i.fontpath,fontType:i.fonttype}),this.elementControl.showText(n),e.next=28;break;case 22:if("audio"!=i.filetype){e.next=28;break}return e.next=25,this.getBlobUrl("file://".concat(i.localpath));case 25:a=e.sent,this.timeline[n].blob=String(a),this.elementControl.showAudio(n);case 28:this.addElementBar(n);case 29:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"resetTimelineData",value:function(){this.timeline={},this.removeAllTimelineBars(),this.elementControl.removeAllElementAsset()}},{key:"removeAllTimelineBars",value:function(){this.querySelectorAll("element-bar").forEach((function(e){e.remove()}))}},{key:"getBlobUrl",value:(t=ve(me().mark((function e(t){var n,i,r,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return i=e.sent,e.abrupt("return",URL.createObjectURL(i));case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.next=16,fetch("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsSAAALEgHS3X78AAAAM0lEQVQ4jWNkYGD4z4AEUDgMDAyMBASYGCgEowaMGjA4DGD8/x8j+dPXBSzka/1PHRcAAFzYCBvm7NkTAAAAAElFTkSuQmCC");case 16:return r=e.sent,e.next=19,r.blob();case 19:return o=e.sent,e.abrupt("return",URL.createObjectURL(o));case 21:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){return t.apply(this,arguments)})},{key:"addElementBar",value:function(e){var t=this.templateElementBar(e);this.querySelector("div[ref='elementLayer']").insertAdjacentHTML("afterbegin",t)}},{key:"templateElementBar",value:function(e){this.timeline[e].duration;var t=this.timeline[e].filetype,n=this.timeline[e].localpath.split("/"),i=(n[n.length-1],de(t));return"static"==i?'\n            <element-bar element-id="'.concat(e,'" element-type="static"></element-bar> \n\n            <animation-panel element-id="').concat(e,'"> \n                <animation-panel-item animation-type="position" element-id="').concat(e,'"></animation-panel-item> \n\n            </animation-panel> \n            '):"dynamic"==i?'<element-bar element-id="'.concat(e,'" element-type="dynamic"></element-bar>'):"none"}},{key:"togglePlayer",value:function(){1==this.elementControl.isPaused?this.elementControl.play():this.elementControl.stop()}},{key:"removeAnimationPanelById",value:function(e){var t=this.querySelector('animation-panel[element-id="'.concat(e,'"]'));if(!t)return 0;t.remove()}},{key:"removeElementInTimelineData",value:function(e){delete this.timeline[e]}},{key:"removeElementById",value:function(e){this.querySelector('element-bar[element-id="'.concat(e,'"]')).remove()}},{key:"removeSeletedElements",value:function(){var e=this;this.elementControl.selectElementsId.forEach((function(t){e.removeElementById(t),e.removeElementInTimelineData(t),e.removeAnimationPanelById(t),e.elementControl.removeElementById(t)})),this.elementControl.selectElementsId=[]}},{key:"copySeletedElement",value:function(){var e=this,t={};this.elementControl.selectElementsId.forEach((function(n){var i=he();t[i]=e.timeline[n]})),this.copyedTimelineData=t}},{key:"splitSeletedElement",value:function(){var e=this,t={},n=Number(document.querySelector("element-timeline-range").value),i=Number(document.querySelector("element-timeline-cursor").style.left.split("px")[0]),r=Number((5*i/(n/4)).toFixed(0));this.elementControl.selectElementsId.forEach((function(n){var i=he(),o=document.querySelector("element-bar[element-id='".concat(n,"']"));if(t[i]=_.cloneDeep(e.timeline[n]),"dynamic"==de(e.timeline[n].filetype)){var a=r-(t[i].trim.startTime+t[i].startTime);t[i].trim.startTime+=a,o.setTrimEnd(o.millisecondsToPx(t[i].trim.startTime)),e.timeline[n].trim.endTime=t[i].trim.startTime}else if("static"==de(e.timeline[n].filetype)){var l=r-t[i].startTime;t[i].startTime+=l,t[i].duration=t[i].duration-l;var c=e.timeline[n].duration-t[i].duration;o.setWidth(o.millisecondsToPx(c)),e.timeline[n].duration=c}})),this.copyedTimelineData=t}},{key:"pasteElement",value:function(e){var t=e.elementId,n=e.element;this.timeline[t]=_.cloneDeep(n)}},{key:"showAnimationPanel",value:function(e){this.querySelector("animation-panel[element-id='".concat(e,"']")).show()}},{key:"hideAnimationPanel",value:function(e){this.querySelector("animation-panel[element-id='".concat(e,"']")).hide()}},{key:"showKeyframeEditor",value:function(e,t){var n=new bootstrap.Offcanvas(document.getElementById("option_bottom")),i=document.querySelector("#timelineOptionBody"),r=document.querySelector("#timelineOptionTargetElement");i.innerHTML='<keyframe-editor element-id="'.concat(e,'" animation-type="').concat(t,'"></keyframe-editor>'),i.classList.remove("d-none"),r.value=e,n.show()}},{key:"deactivateSeletedBar",value:function(){this.elementControl.selectElementsId.forEach((function(e){document.querySelector("element-bar[element-id='".concat(e,"']")).unselectThisElement()}))}},{key:"fixRulerOnTop",value:function(){var e=this.scrollTop,t=document.querySelector("element-timeline-ruler"),n=document.querySelector("element-timeline-cursor");t.setTopPosition(e),n.style.top="".concat(e,"px")}},{key:"scrollKeyframeEditor",value:function(){if(0==!!document.querySelector("keyframe-editor"))return 0;document.querySelector("keyframe-editor").scrollTo(this.scrollLeft,this.scrollTop)}},{key:"handleKeydown",value:function(e){if(console.log("event keycode > ",e.keyCode),1==this.elementControl.existActiveElement)return 0;if(32==e.keyCode&&(e.preventDefault(),this.togglePlayer()),8==e.keyCode&&(e.preventDefault(),this.removeSeletedElements()),e.ctrlKey&&86==e.keyCode)for(var t in this.copyedTimelineData)Object.hasOwnProperty.call(this.copyedTimelineData,t)&&(this.pasteElement({elementId:t,element:this.copyedTimelineData[t]}),this.patchElementInTimeline({elementId:t,element:this.copyedTimelineData[t]}));if(e.ctrlKey&&67==e.keyCode&&this.copySeletedElement(),e.ctrlKey&&88==e.keyCode&&(this.copySeletedElement(),this.removeSeletedElements()),e.ctrlKey&&68==e.keyCode)for(var n in this.splitSeletedElement(),this.copyedTimelineData)Object.hasOwnProperty.call(this.copyedTimelineData,n)&&(this.pasteElement({elementId:n,element:this.copyedTimelineData[n]}),this.patchElementInTimeline({elementId:n,element:this.copyedTimelineData[n]}))}},{key:"handleMousedown",value:function(){this.elementControl.deactivateAllOutline(),this.deactivateSeletedBar()}},{key:"handleScroll",value:function(){this.fixRulerOnTop(),this.scrollKeyframeEditor(),this.querySelector("element-timeline-scroll").setScrollThumbLeft({px:this.scrollLeft})}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mousedown",this.handleMousedown.bind(this)),this.addEventListener("scroll",this.handleScroll.bind(this)),document.addEventListener("keydown",this.handleKeydown.bind(this))}}]),o}(Ee(HTMLElement)),Ie=function(e){Se(n,e);var t=xe(n);function n(){var e;return be(this,n),(e=t.call(this)).elementTimelineRuler,window.addEventListener("DOMContentLoaded",(function(){e.elementTimelineRuler=document.querySelector("element-timeline-ruler")})),e}return we(n,[{key:"render",value:function(){this.classList.add("timeline-bar"),this.setAttribute("id","timeline_bar"),this.style.left="0px",this.style.top="0px"}},{key:"move",value:function(e){this.style.left="".concat(e,"px")}},{key:"handleMousedown",value:function(e){this.elementTimelineRuler.moveTime(e),this.elementTimelineRuler.mousemoveEventHandler=this.elementTimelineRuler.handleMousemove.bind(this.elementTimelineRuler),document.addEventListener("mousemove",this.elementTimelineRuler.mousemoveEventHandler)}},{key:"handleMouseup",value:function(e){document.removeEventListener("mousemove",this.elementTimelineRuler.mousemoveEventHandler)}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mousedown",this.handleMousedown.bind(this)),document.addEventListener("mouseup",this.handleMouseup.bind(this))}}]),n}(Ee(HTMLElement)),qe=function(e){Se(n,e);var t=xe(n);function n(){var e;return be(this,n),(e=t.call(this)).mousemoveEventHandler=void 0,e.mouseTimeout=void 0,e.rulerType="sec",e.timeMagnification=1,e}return we(n,[{key:"render",value:function(){this.innerHTML="";var e=this.template();this.classList.add("ps-0","overflow-hidden","position-absolute"),this.style.top="40px",this.innerHTML=e,this.drawRuler()}},{key:"template",value:function(){var e=document.querySelector("element-timeline").clientWidth;return'<canvas ref="canvas" width="'.concat(e,'" height="').concat(30,'"></canvas>')}},{key:"drawRuler",value:function(){var e=document.querySelector("element-timeline").clientWidth,t=this.querySelector("canvas[ref='canvas']"),n=t.getContext("2d");t.width=e,n.clearRect(0,0,t.width,t.height);var i=1,r=1,o="s";this.timeMagnification>=.5?(i=1,r=1,o="s"):this.timeMagnification<.5&&this.timeMagnification>=.1?(i=5,r=1,o="s"):this.timeMagnification<.1&&this.timeMagnification>=.01?(i=60,r=60,o="m"):this.imeMagnification<.01&&this.timeMagnification>=.001?(i=300,r=60,o="m"):(i=3600,r=3600,o="h");for(var a=-document.querySelector("element-timeline").scrollLeft%(180*this.timeMagnification*i),l=Math.floor(document.querySelector("element-timeline").scrollLeft/(180*this.timeMagnification*i)),c=18*this.timeMagnification,u=Number(e/c)+c,s=0;s<u;s++)if(!(s%i>0)){var f=c*s+a,h=f,d=15,p=f;n.beginPath(),s%(10*i)==0?(d=10,n.strokeStyle="#e3e3e3",n.font="12px serif",n.strokeText("".concat((Number(s/10)+l*i)/r).concat(o),h-c/2,10)):n.strokeStyle="#e3e3e3",n.moveTo(h,d),n.lineTo(p,20),n.lineWidth=1,n.stroke()}}},{key:"addTickNumber",value:function(e){}},{key:"updateRulerSpace",value:function(e){console.log("w",e),this.timeMagnification=1.1111111111*e,this.drawRuler()}},{key:"updateRulerLength",value:function(e){console.log("s"),this.updateTimelineEnd()}},{key:"updateTimelineEnd",value:function(){var e=document.querySelector("element-timeline-end"),t=document.querySelector("#projectDuration").value,n=Number(document.querySelector("element-timeline-range").value)/4;e.setEndTimeline({px:1e3*t/5*n})}},{key:"changeWidth",value:function(e){this.style.width="".concat(e,"px")}},{key:"setTopPosition",value:function(e){}},{key:"moveTime",value:function(e){var t=document.querySelector("element-timeline-cursor"),n=document.querySelector("element-timeline"),i=document.querySelector("element-control");i.progress=e.pageX+n.scrollLeft,i.progressTime=i.getTimeFromProgress(),i.stop(),i.showTime(),i.appearAllElementInTime(),t.move(e.pageX+n.scrollLeft)}},{key:"handleMousemove",value:function(e){var t=this,n=document.querySelector("element-timeline-cursor"),i=document.querySelector("element-timeline"),r=document.querySelector("element-control");n.move(e.pageX+i.scrollLeft),r.showTime(),clearTimeout(this.mouseTimeout),this.mouseTimeout=setTimeout((function(){clearInterval(t.resizeInterval),t.moveTime(e)}),100)}},{key:"handleMousedown",value:function(e){e.stopPropagation(),this.moveTime(e),this.mousemoveEventHandler=this.handleMousemove.bind(this),document.addEventListener("mousemove",this.mousemoveEventHandler)}},{key:"handleMouseup",value:function(e){document.removeEventListener("mousemove",this.mousemoveEventHandler)}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mousedown",this.handleMousedown.bind(this)),document.addEventListener("mouseup",this.handleMouseup.bind(this)),document.querySelector("element-timeline").addEventListener("scroll",this.drawRuler.bind(this))}}]),n}(Ee(HTMLElement)),Re=function(e){Se(n,e);var t=xe(n);function n(){var e;return be(this,n),(e=t.call(this)).value=.9,e}return we(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.updateValue()}},{key:"template",value:function(){return'<input ref="range" type="range" class="form-range" min="0" max="6" step="0.02" id="timelineRange" value="6">'}},{key:"updateValue",value:function(){var e=this.querySelector("input[ref='range']");if((e.value*e.value/10).toFixed(3)<=0)return 0;this.value=(e.value*e.value/10).toFixed(3)}},{key:"updateRange",value:function(){this.updateValue(),document.querySelector("element-control").changeTimelineRange(),this.updateTimelineScrollToCenter()}},{key:"updateTimelineScrollToCenter",value:function(){var e=document.querySelector("element-timeline"),t=document.querySelector("element-timeline-cursor"),n=Number(t.style.left.split("px")[0]),i=Number(e.clientWidth);e.scrollLeft=n-i/2}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("input[ref='range']").addEventListener("input",this.updateRange.bind(this)),this.querySelector("input[ref='range']").addEventListener("change",this.updateRange.bind(this))}}]),n}(Ee(HTMLElement)),Me=function(e){Se(n,e);var t=xe(n);function n(){return be(this,n),t.call(this)}return we(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e}},{key:"setEndTimeline",value:function(e){var t=e.px;console.log(t),this.style.left="".concat(t,"px")}},{key:"template",value:function(){return""}},{key:"connectedCallback",value:function(){this.render()}}]),n}(Ee(HTMLElement)),_e=function(e){Se(n,e);var t=xe(n);function n(){return be(this,n),t.call(this)}return we(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.classList.add("w-100","fixed-bottom")}},{key:"scrollTimeline",value:function(e){var t=e.per,n=document.querySelector("element-timeline"),i=t*(n.scrollWidth/100);console.log(i),n.scrollLeft=i}},{key:"updateValue",value:function(){var e=this.querySelector("input[ref='range']");console.log(e.value),this.scrollTimeline({per:e.value})}},{key:"updateRange",value:function(){this.updateValue()}},{key:"setScrollThumbLeft",value:function(e){var t=e.px/document.querySelector("element-timeline").scrollWidth*100;this.querySelector("input[ref='range']").value=t}},{key:"template",value:function(){return'<input ref="range" type="range" class="form fixed-bottom w-100" min="0" max="100" step="0.01" value="0">'}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("input[ref='range']").addEventListener("input",this.updateRange.bind(this)),this.querySelector("input[ref='range']").addEventListener("change",this.updateRange.bind(this))}}]),n}(Ee(HTMLElement));function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Ae(r)?r:String(r)),i)}var r}function Ne(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function He(e){var t="function"==typeof Map?new Map:void 0;return He=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ze(e,arguments,Fe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Be(n,e)},He(e)}function ze(e,t,n){return ze=De()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Be(r,n.prototype),r},ze.apply(null,arguments)}function De(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(a,e);var t,n,i,r,o=(t=a,n=De(),function(){var e,i=Fe(t);if(n){var r=Fe(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Ne(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).elementTimeline=document.querySelector("element-timeline"),e.elementControl=document.querySelector("element-control"),e.timeline=document.querySelector("element-timeline").timeline,e.elementId=e.getAttribute("element-id"),e.elementBarType=e.getAttribute("element-type")||"static",e.elementFileType=e.timeline[e.elementId].filetype,e.width=e.millisecondsToPx(e.timeline[e.elementId].duration),e.startTime=e.millisecondsToPx(e.timeline[e.elementId].startTime),e.isDrag=!1,e.isResize=!1,e.resizeLocation="left",e.initialDuration=1e3,e.initialPosition={x:0,y:0};var t=e.timeline[e.elementId].localpath.split("/");return e.filepath=t[t.length-1],e.resizeEventHandler,e.dragEventHandler,e}return i=a,r=[{key:"render",value:function(){var e;e="static"==this.elementBarType?this.templateStatic():this.templateDynamic();var t=this.getRandomColor();this.classList.add("element-bar","d-block","d-flex","align-items-center"),this.setAttribute("style","width: ".concat(this.width,"px; left: ").concat(this.startTime,"px; background-color: ").concat(t,";")),this.setAttribute("value",this.elementId),this.innerHTML=e,this.setTrimBar()}},{key:"setTrimBar",value:function(){if("dynamic"==this.elementBarType){var e=this.millisecondsToPx(this.timeline[this.elementId].trim.startTime),t=this.millisecondsToPx(this.timeline[this.elementId].trim.endTime);this.setTrimStart(e),this.setTrimEnd(t),this.elementControl.changeTimelineRange()}}},{key:"templateStatic",value:function(){return"\n        ".concat(this.templateTypeLogo({type:this.timeline[this.elementId].filetype}),'\n        <span ref="name">').concat(this.filepath,'</span>\n        \n        <div class="element-bar-resize-left position-absolute" onmousedown="this.parentNode.resizeMousedown(this, \'left\')"></div>\n        <div class="element-bar-resize-right position-absolute" onmousedown="this.parentNode.resizeMousedown(this, \'right\')"></div>\n        ')}},{key:"templateDynamic",value:function(){return"\n        ".concat(this.templateTypeLogo({type:this.timeline[this.elementId].filetype}),'\n        <span ref="name">').concat(this.filepath,'</span>\n        <div class="element-bar-hiddenspace-left position-absolute">\n            <div class="element-bar-resize-hiddenspace-left position-absolute" onmousedown="this.parentNode.parentNode.resizeRangeMousedown(this, \'left\')">\n            </div>\n        </div>\n        <div class="element-bar-hiddenspace-right position-absolute">\n            <div class="element-bar-resize-hiddenspace-right position-absolute" onmousedown="this.parentNode.parentNode.resizeRangeMousedown(this, \'right\')">\n            </div>\n        </div>\n        ')}},{key:"templateTypeLogo",value:function(e){return{image:'<span class="material-symbols-outlined">image</span>',video:'<span class="material-symbols-outlined">movie</span>',audio:'<span class="material-symbols-outlined">music_note</span>',text:'<span class="material-symbols-outlined">description</span>'}[e.type]}},{key:"getRandomArbitrary",value:function(e,t){return Math.round(Math.random()*(t-e)+e)}},{key:"getRandomColor",value:function(){var e={r:this.getRandomArbitrary(45,167),g:this.getRandomArbitrary(23,139),b:this.getRandomArbitrary(56,180)};return"rgb(".concat(e.r,",").concat(e.g,",").concat(e.b,")")}},{key:"animationPanelMove",value:function(e){if("dynamic"==this.elementBarType)return 0;document.querySelector('animation-panel[element-id="'.concat(this.elementId,'"]')).move(e)}},{key:"drag",value:function(e){if(this.isDrag){var t=e.pageX-this.initialPosition.x;e.pageY,this.initialPosition.y,this.style.left="".concat(t,"px"),this.animationPanelMove(t),this.timeline[this.elementId].startTime=this.pxToMilliseconds(t),this.dragEditGuide()}}},{key:"dragEditGuide",value:function(){var e={startX:"static"==this.elementBarType?Number(this.style.left.split("px")[0]):Number(this.style.left.split("px")[0])+this.millisecondsToPx(this.timeline[this.elementId].trim.startTime),endX:"static"==this.elementBarType?Number(this.style.left.split("px")[0])+Number(this.style.width.split("px")[0]):Number(this.style.left.split("px")[0])+this.millisecondsToPx(this.timeline[this.elementId].trim.endTime)};for(var t in this.timeline)if(Object.hasOwnProperty.call(this.timeline,t)){if(t==this.elementId)continue;var n=this.timeline[t],i=de(n.filetype);this.guide({element:n,filetype:i,elementBarPosition:e})}}},{key:"guide",value:function(e){var t=e.element,n=e.filetype,i=e.elementBarPosition,r="static"==n?this.millisecondsToPx(t.startTime):this.millisecondsToPx(t.startTime+t.trim.startTime),o="static"==n?this.millisecondsToPx(t.startTime+t.duration):this.millisecondsToPx(t.startTime+t.trim.endTime),a=10;if(i.startX>r-a&&i.startX<r+a){var l="static"==this.elementBarType?r:r-this.millisecondsToPx(this.timeline[this.elementId].trim.startTime);this.style.left="".concat(l,"px"),this.timeline[this.elementId].startTime=this.pxToMilliseconds(l)}if(i.startX>o-a&&i.startX<o+a){var c="static"==this.elementBarType?o:o-this.millisecondsToPx(this.timeline[this.elementId].trim.startTime);this.style.left="".concat(c,"px"),this.timeline[this.elementId].startTime=this.pxToMilliseconds(c)}if(i.endX>r-a&&i.endX<r+a){var u="static"==this.elementBarType?r-this.millisecondsToPx(this.timeline[this.elementId].duration):r-this.millisecondsToPx(this.timeline[this.elementId].trim.endTime);this.style.left="".concat(u,"px"),this.timeline[this.elementId].startTime=this.pxToMilliseconds(u)}if(i.endX>o-a&&i.endX<o+a){var s="static"==this.elementBarType?o-this.millisecondsToPx(this.timeline[this.elementId].duration):o-this.millisecondsToPx(this.timeline[this.elementId].trim.endTime);this.style.left="".concat(s,"px"),this.timeline[this.elementId].startTime=this.pxToMilliseconds(s)}}},{key:"dragMousedown",value:function(e){this.addEventListener("mousemove",this.drag),this.isDrag=!0,this.initialPosition.x=e.pageX-Number(this.style.left.split("px")[0]),this.initialPosition.y=e.pageY,this.dragEventHandler=this.drag.bind(this),document.addEventListener("mousemove",this.dragEventHandler)}},{key:"dragMouseup",value:function(){document.removeEventListener("mousemove",this.dragEventHandler),this.isDrag=!1}},{key:"setWidth",value:function(e){this.style.width="".concat(e,"px")}},{key:"setLeft",value:function(e){this.style.left="".concat(e,"px")}},{key:"setTrimStart",value:function(e){this.querySelector(".element-bar-hiddenspace-left").style.width="".concat(e,"px")}},{key:"setTrimEnd",value:function(e){if(this.millisecondsToPx(this.timeline[this.elementId].duration)-this.millisecondsToPx(this.timeline[this.elementId].trim.startTime)<e)return 0;this.querySelector(".element-bar-hiddenspace-right").style.width="".concat(e,"px")}},{key:"millisecondsToPx",value:function(e){var t=Number(document.querySelector("element-timeline-range").value);return Number((e/5*(t/4)).toFixed(0))}},{key:"pxToMilliseconds",value:function(e){var t=Number(document.querySelector("element-timeline-range").value);return Number((5*e/(t/4)).toFixed(0))}},{key:"resize",value:function(e){this.unselectThisElement(),this.isDrag=!1;var t=e.pageX-this.initialPosition.x,n=(e.pageY,this.initialPosition.y,this.initialDuration),i=document.querySelector("element-timeline").scrollLeft;"left"==this.resizeLocation?(this.setLeft(t),this.setWidth(n-t),this.timeline[this.elementId].startTime=this.pxToMilliseconds(t),this.timeline[this.elementId].duration=this.pxToMilliseconds(Number(this.style.width.split("px")[0])),this.animationPanelMove(t)):(this.setWidth(i+e.pageX-Number(this.style.left.split("px")[0])),this.timeline[this.elementId].duration=this.pxToMilliseconds(Number(this.style.width.split("px")[0])))}},{key:"resizeRange",value:function(e){this.isDrag=!1;var t=e.pageX-this.initialPosition.x,n=this.initialDuration,i=(Number(this.style.width.split("px")[0]),this.querySelector(".element-bar-hiddenspace-left")),r=(this.querySelector(".element-bar-hiddenspace-right"),document.querySelector("element-timeline")),o=(window.innerWidth,r.scrollWidth,Number(this.style.width.split("px")[0])),a=Number(this.style.left.split("px")[0]),l=r.scrollLeft;if("left"==this.resizeLocation)this.setTrimStart(this.initialPosition.x+t+l-a),this.timeline[this.elementId].trim.startTime=this.pxToMilliseconds(Number(i.style.width.split("px")[0]));else{var c=a+o-e.pageX-l;this.querySelector(".element-bar-hiddenspace-right").style.width="".concat(c,"px"),this.timeline[this.elementId].trim.endTime=Number(this.pxToMilliseconds(n-c).toFixed(0))}}},{key:"resizeMousedown",value:function(e,t){this.isResize=!0,this.resizeLocation=t,this.isDrag=!1,this.initialPosition.x=Number(this.style.left.split("px")[0]),this.initialPosition.y=e.pageY,this.initialDuration=this.millisecondsToPx(this.timeline[this.elementId].duration)+Number(this.style.left.split("px")[0]),this.resizeEventHandler=this.resize.bind(this),document.addEventListener("mousemove",this.resizeEventHandler)}},{key:"resizeRangeMousedown",value:function(e,t){this.isResize=!0,this.resizeLocation=t,this.resizeRangeLeft=Number(this.querySelector(".element-bar-hiddenspace-left").style.width.split("px")[0]),this.resizeRangeRight=Number(this.querySelector(".element-bar-hiddenspace-right").style.width.split("px")[0]),this.isDrag=!1,this.initialPosition.x=Number(this.style.left.split("px")[0]),this.initialDuration=this.millisecondsToPx(this.timeline[this.elementId].duration),this.resizeEventHandler=this.resizeRange.bind(this),document.addEventListener("mousemove",this.resizeEventHandler)}},{key:"resizeMouseup",value:function(){document.removeEventListener("mousemove",this.resizeEventHandler),this.isResize=!1}},{key:"changeOutlineColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";"add"==e?this.classList.add("border-inner-light"):"remove"==e&&this.classList.remove("border-inner-light")}},{key:"selectThisElement",value:function(){var e=document.querySelector("element-control");if(e.selectElementsId.includes(this.elementId))return 0;e.selectElementsId.push(this.elementId),this.changeOutlineColor("add")}},{key:"unselectThisElement",value:function(){var e=this,t=document.querySelector("element-control");t.selectElementsId=t.selectElementsId.filter((function(t){return t!==e.elementId})),this.changeOutlineColor("remove")}},{key:"animationPanelDropdownTemplate",value:function(){if("dynamic"==this.elementBarType||"text"==this.elementFileType)return"";var e=this.isShowAnimationPanel(),t=1==e?"애니메이션 패널 닫기":"애니메이션 패널 열기",n="document.querySelector(\"animation-panel[element-id='".concat(this.elementId,1==e?"']\").hide()":"']\").show()");return"<menu-dropdown-item onclick=".concat(n,' item-name="').concat(t,'"></menu-dropdown-item>')}},{key:"isShowAnimationPanel",value:function(){return document.querySelector("animation-panel[element-id='".concat(this.elementId,"']")).isShow}},{key:"showMenuDropdown",value:function(e){var t=e.x,n=e.y,i=this.animationPanelDropdownTemplate();document.querySelector("#menuRightClick").innerHTML='\n            <menu-dropdown-body top="'.concat(n,'" left="').concat(t,'">\n            ').concat(i,'\n\n            <menu-dropdown-item onclick="document.querySelector(\'element-timeline\').removeSeletedElements()" item-name="삭제"> </menu-dropdown-item>\n        </menu-dropdown-body>')}},{key:"showSideOption",value:function(){document.querySelector("option-group").showOption({filetype:this.elementFileType,elementId:this.elementId})}},{key:"rightclick",value:function(e){if(3!=e.which&&2!=e.button)return 0;this.showMenuDropdown({x:e.clientX,y:e.clientY})}},{key:"handleMousedown",value:function(e){this.selectThisElement(),this.dragMousedown(e),this.showSideOption()}},{key:"handleMouseup",value:function(e){this.rightclick(e),this.selectThisElement()}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mousedown",this.handleMousedown.bind(this)),this.addEventListener("mouseup",this.handleMouseup.bind(this)),document.addEventListener("mouseup",this.dragMouseup.bind(this)),document.addEventListener("mouseup",this.resizeMouseup.bind(this))}},{key:"disconnectedCallback",value:function(){this.removeEventListener("mousedown",this.handleMousedown),this.removeEventListener("mouseup",this.handleMouseup),document.removeEventListener("mouseup",this.dragMouseup),document.removeEventListener("mouseup",this.resizeMouseup)}}],r&&Ce(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(He(HTMLElement));function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Ve(){Ve=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),l=new k(r||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function d(){}function p(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&n.call(v,o)&&(m=v);var b=p.prototype=h.prototype=Object.create(m);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,a,l){var c=s(e[i],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Ue(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function S(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var l=x(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=s(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function x(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=s(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,i(b,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:d,configurable:!0}),d.displayName=c(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new w(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),c(b,l,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function We(e,t,n,i,r,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(i,r)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Ue(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Ue(r)?r:String(r)),i)}var r}function Ke(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function Qe(e){var t=tt();return function(){var n,i=it(e);if(t){var r=it(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $e(e){var t="function"==typeof Map?new Map:void 0;return $e=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return et(e,arguments,it(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),nt(n,e)},$e(e)}function et(e,t,n){return et=tt()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&nt(r,n.prototype),r},et.apply(null,arguments)}function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}var rt=function(e){Je(i,e);var t,n=Qe(i);function i(){var e;return Xe(this,i),(e=n.call(this)).elementTimeline,e.timeline,e.timelineCursor,window.addEventListener("DOMContentLoaded",(function(){e.elementTimeline=document.querySelector("element-timeline"),e.timeline=document.querySelector("element-timeline").timeline,e.timelineCursor=document.querySelector("element-timeline-cursor"),e.changeTimelineRange()})),e.scroller=void 0,e.resizeTimeout=void 0,e.resizeInterval=void 0,e.isResizeStart=!1,e.previousPreviewSize={w:1920,h:1080},e.isPaused=!0,e.isPlay={},e.activeElementId="",e.selectElementsId=[],e.existActiveElement=!1,e.progress=0,e.progressTime=0,e.previewRatio=1,e.resizeEvent(),e}return Ke(i,[{key:"resizeEvent",value:(t=function(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){We(o,i,r,a,l,"next",e)}function l(e){We(o,i,r,a,l,"throw",e)}a(void 0)}))}}(Ve().mark((function e(){var t=this;return Ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.resizePreview(),clearTimeout(this.resizeTimeout),0==this.isResizeStart&&(this.isResizeStart=!0,this.resizeInterval=setInterval((function(){t.matchAllElementsSizeToPreview()}),50)),this.resizeTimeout=setTimeout((function(){clearInterval(t.resizeInterval),t.isResizeStart=!1}),300);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"resizePreview",value:function(){var e=document.getElementById("split_col_2").offsetWidth,t=(document.getElementById("split_top").offsetHeight,document.getElementById("split_bottom").offsetHeight),n=document.getElementById("videobox").offsetHeight,i=document.getElementById("video").offsetHeight,r=(document.querySelector("element-timeline").offsetHeight,Math.round(.95*e)),o=Math.round(9*r/16),a=.92*(window.innerHeight-(t+20)-(n-i)),l=a*(16/9),c=r>l?l:r,u=o>a?a:o;preview.width=c,preview.height=u,preview.style.width="".concat(c,"px"),preview.style.height="".concat(u,"px"),video.style.width="".concat(c,"px"),video.style.height="".concat(u,"px"),this.previewRatio=1920/c}},{key:"matchAllElementsSizeToPreview",value:function(e){for(var t in this.timeline)if(Object.hasOwnProperty.call(this.timeline,t)){var n=document.querySelector("#element-".concat(t)),i=Number(this.timeline[t].height)/this.previewRatio,r=Number(this.timeline[t].width)/this.previewRatio,o=Number(this.timeline[t].location.y)/this.previewRatio,a=Number(this.timeline[t].location.x)/this.previewRatio;if("text"!=this.timeline[t].filetype)n.resizeStyle({x:a,y:o,w:r,h:i});else if("text"==this.timeline[t].filetype){var l=Number(this.timeline[t].fontsize)/this.previewRatio;n.resizeStyle({x:a,y:o,w:r,h:i}),n.resizeFont({px:l})}}}},{key:"removeElementById",value:function(e){this.querySelector('element-control-asset[element-id="'.concat(e,'"]')).remove(),this.timeline=document.querySelector("element-timeline").timeline}},{key:"removeAllElementAsset",value:function(){this.querySelectorAll("element-control-asset").forEach((function(e){e.remove()})),this.timeline=document.querySelector("element-timeline").timeline}},{key:"fitElementSizeOnPreview",value:function(e,t){var n={w:Number(document.querySelector("#video").style.width.split("px")[0]),h:Number(document.querySelector("#video").style.height.split("px")[0])},i=t<n.h?t:n.h;return{width:i*(e/t),height:i}}},{key:"addImage",value:function(e,t){var n=this,i=this.generateUUID(),r=document.createElement("img");r.src=e,r.onload=function(){var o=n.fitElementSizeOnPreview(r.width,r.height),a=o.width,l=o.height;n.timeline[i]={blob:e,startTime:0,duration:1e3,location:{x:0,y:0},rotation:0,width:a,height:l,localpath:t,filetype:"image",animation:{position:{isActivate:!1,points:[[],[]],allpoints:[[],[]]},opacity:{isActivate:!1,points:[[]],allpoints:[[]]}}},n.showImage(i),n.elementTimeline.addElementBar(i)}}},{key:"addVideo",value:function(e,t){var n=this,i=this.generateUUID(),r=document.createElement("video"),o=bootstrap.Toast.getInstance(document.getElementById("loadMetadataToast"));o.show(),r.src=e,r.preload="metadata",r.onloadedmetadata=function(){var a=r.videoWidth,l=r.videoHeight,c=1e3*r.duration;window.electronAPI.req.ffmpeg.getMetadata(e,t),window.electronAPI.res.ffmpeg.getMetadata((function(r,u,s){if(u!=e)return 0;var f=!1;setTimeout((function(){o.hide()}),1e3),s.streams.forEach((function(e){"audio"==e.codec_type&&(f=!0)})),n.timeline[i]={blob:e,startTime:0,duration:c,location:{x:0,y:0},trim:{startTime:0,endTime:c},rotation:0,width:a,height:l,localpath:t,isExistAudio:f,filetype:"video",codec:{video:"default",audio:"default"}},n.showVideo(i),n.elementTimeline.addElementBar(i)}))}}},{key:"addText",value:function(){var e=this.generateUUID();this.timeline[e]={startTime:0,duration:1e3,text:"텍스트",textcolor:"#ffffff",fontsize:52,fontpath:"default",fontname:"notosanskr",fontweight:"medium",fonttype:"otf",location:{x:0,y:0},rotation:0,localpath:"/TEXTELEMENT",filetype:"text",height:52,width:500,widthInner:200,animation:{position:{isActivate:!1,points:[[],[]],allpoints:[[],[]]},opacity:{isActivate:!1,points:[[]],allpoints:[[]]}}},this.showText(e),this.elementTimeline.addElementBar(e)}},{key:"addAudio",value:function(e,t){var n=this,i=this.generateUUID(),r=document.createElement("audio");r.src=e,r.onloadedmetadata=function(){var o=1e3*r.duration;n.timeline[i]={blob:e,startTime:0,duration:o,location:{x:0,y:0},trim:{startTime:0,endTime:o},localpath:t,filetype:"audio"},n.showAudio(i),n.elementTimeline.addElementBar(i)}}},{key:"showAnimation",value:function(e,t){var n=20*Math.round(document.querySelector("element-control").progressTime/20),i=Number(this.timeline[e].startTime),r=Math.round((n-i)/20);try{if(r<0)return 0;document.querySelector("#element-".concat(e)).style.left="".concat(this.timeline[e].animation[t].allpoints[0][r].y/this.previewRatio,"px"),document.querySelector("#element-".concat(e)).style.top="".concat(this.timeline[e].animation[t].allpoints[1][r].y/this.previewRatio,"px")}catch(e){}}},{key:"showImage",value:function(e){null==document.getElementById("element-".concat(e))?this.insertAdjacentHTML("beforeend",'<element-control-asset element-id="'.concat(e,'" element-filetype="image"></element-control-asset>')):document.querySelector("#element-".concat(e)).classList.remove("d-none");1==this.timeline[e].animation.position.isActivate&&this.showAnimation(e,"position")}},{key:"showVideo",value:function(e){if(null==document.getElementById("element-".concat(e))){this.insertAdjacentHTML("beforeend",'<element-control-asset element-id="'.concat(e,'" element-filetype="video"></element-control-asset>'));var t=document.getElementById("element-".concat(e)).querySelector("video"),n=(this.timeline[e].startTime-this.progressTime)/1e3;t.currentTime=n}else{var i=document.getElementById("element-".concat(e)).querySelector("video"),r=-(this.timeline[e].startTime-this.progressTime)/1e3;i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2?this.isPaused&&console.log("paused"):this.isPaused?(i.pause(),this.isPlay[e]=!1):(this.isPlay[e]||(i.currentTime=r,i.play()),this.isPlay[e]=!0),document.querySelector("#element-".concat(e)).classList.remove("d-none")}}},{key:"showAudio",value:function(e){if(null==document.getElementById("element-".concat(e))){this.insertAdjacentHTML("beforeend",'<element-control-asset element-id="'.concat(e,'" element-filetype="audio"></element-control-asset>'));var t=document.getElementById("element-".concat(e)).querySelector("audio"),n=(this.timeline[e].startTime-this.progressTime)/1e3;t.currentTime=n}else{var i=document.getElementById("element-".concat(e)).querySelector("audio"),r=-(this.timeline[e].startTime-this.progressTime)/1e3;i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2?(this.isPaused&&console.log("paused"),console.log("isPlaying")):(i.currentTime=r,this.isPaused?i.pause():i.play()),document.querySelector("#element-".concat(e)).classList.remove("d-none")}}},{key:"showText",value:function(e){null==document.getElementById("element-".concat(e))?this.insertAdjacentHTML("beforeend",'<element-control-asset element-id="'.concat(e,'" element-filetype="text"></element-control-asset>')):document.querySelector("#element-".concat(e)).classList.remove("d-none"),1==this.timeline[e].animation.isActivate&&this.timeline[e].animation.allpoints.length>document.querySelector("element-control").progress&&this.showAnimation(e)}},{key:"changeText",value:function(e){var t=document.querySelector("#element-".concat(e)),n=t.querySelector("input-text"),i=(n.querySelector("span"),n.value);this.timeline[e].text=i,t.style.width="".concat(n.offsetWidth,"px")}},{key:"changeTextColor",value:function(e){var t=e.elementId,n=e.color;document.querySelector("#element-".concat(t)).querySelector("input-text").style.color=n,this.timeline[t].textcolor=n}},{key:"changeTextSize",value:function(e){var t=e.elementId,n=e.size,i=document.querySelector("#element-".concat(t));i.querySelector("input-text").setWidthInner();var r=Number(n)/this.previewRatio;i.style.fontSize="".concat(r,"px"),i.style.height="".concat(r,"px"),this.timeline[t].fontsize=Number(n),this.timeline[t].height=Number(n)}},{key:"changeTextFont",value:function(e){var t=e.elementId,n=e.fontPath,i=(e.fontType,e.fontName),r=document.querySelector("#element-".concat(t));r.querySelector("input-text"),r.style.fontFamily=i,this.timeline[t].fontpath=n,this.timeline[t].fontname=i}},{key:"changeTimelineRange",value:function(){var e=document.querySelector("element-timeline-ruler"),t=document.querySelector("element-timeline-end"),n=document.querySelector("#projectDuration").value,i=Number(document.querySelector("element-timeline-range").value),r=i/4;if(0==i)return 0;e.updateRulerSpace(r),this.timelineCursor.move(this.progressTime/5*r),this.adjustAllElementBarWidth(r),this.updateAllAnimationPanel(),t.setEndTimeline({px:1e3*n/5*r})}},{key:"updateAllAnimationPanel",value:function(){for(var e in this.timeline)if(Object.hasOwnProperty.call(this.timeline,e)){var t=this.timeline[e];if("image"!=t.filetype)continue;if(0==t.animation.position.isActivate)continue;var n=document.querySelector('animation-panel[element-id="'.concat(e,'"]')),i=document.querySelector('element-bar[element-id="'.concat(e,'"]')),r=i.millisecondsToPx(this.timeline[e].startTime);n.updateItem(),i.animationPanelMove(r)}}},{key:"getTimeFromProgress",value:function(){var e=Number(document.querySelector("element-timeline-range").value)/4;return 5*this.progress/e}},{key:"getTimeFromTimelineBar",value:function(){return 5*Number(this.timelineCursor.style.left.split("px")[0])/(Number(document.querySelector("element-timeline-range").value)/4)}},{key:"adjustAllElementBarWidth",value:function(e){var t=this;document.querySelectorAll("element-bar").forEach((function(e){var n=e.getAttribute("element-id"),i=e.millisecondsToPx(t.timeline[n].duration),r=e.millisecondsToPx(t.timeline[n].startTime);if(e.setWidth(i),e.setLeft(r),"dynamic"==e.elementBarType){var o=e.millisecondsToPx(t.timeline[n].trim.startTime),a=e.millisecondsToPx(t.timeline[n].duration-t.timeline[n].trim.endTime);e.setTrimStart(o),e.setTrimEnd(a)}}))}},{key:"getMillisecondsToISOTime",value:function(e){return new Date(e).toISOString().slice(11,22)}},{key:"progressToTime",value:function(){var e=5*this.progress;return new Date(e).toISOString().slice(11,22)}},{key:"generateUUID",value:function(){return he()}},{key:"showTime",value:function(){var e=document.querySelector("#time"),t=this.getTimeFromTimelineBar(),n=this.getMillisecondsToISOTime(t);e.innerHTML=n}},{key:"hideElement",value:function(e){"video"==this.timeline[e].filetype?this.pauseVideo(e):"audio"==this.timeline[e].filetype&&this.pauseAudio(e),document.querySelector("#element-".concat(e)).classList.add("d-none")}},{key:"appearAllElementInTime",value:function(){for(var e in this.timeline){var t=this.timeline[e].filetype,n=this.timeline[e].startTime>this.progressTime||this.timeline[e].startTime+this.timeline[e].duration<this.progressTime;"video"!=t&&"audio"!=t||(n=this.timeline[e].startTime+this.timeline[e].trim.startTime>this.progressTime||this.timeline[e].startTime+this.timeline[e].trim.endTime<this.progressTime),n?this.hideElement(e):"image"==t?this.showImage(e):"video"==t?this.showVideo(e):"text"==t?this.showText(e):"audio"==t&&this.showAudio(e)}}},{key:"play",value:function(){var e=this,t=document.querySelector("#playToggle");t.setAttribute("onclick","elementControlComponent.stop()"),t.innerHTML='<span class="material-symbols-outlined icon-white icon-md"> stop_circle </span>',this.scroller=setInterval((function(){var t=Number(document.querySelector("element-timeline-range").value),n=Number(e.timelineCursor.style.left.split("px")[0])+t;e.progress=n,e.progressTime=e.getTimeFromProgress(),e.timelineCursor.move(n),e.showTime(),e.innerWidth+e.offsetWidth>=e.offsetWidth&&e.stop(),e.appearAllElementInTime()}),20),this.isPaused=!1}},{key:"stop",value:function(){clearInterval(this.scroller);var e=document.querySelector("#playToggle");for(var t in this.isPaused=!0,this.timeline)Object.hasOwnProperty.call(this.timeline,t)&&(this.isPlay[t]=!1);e.setAttribute("onclick","elementControlComponent.play()"),e.innerHTML='<span class="material-symbols-outlined icon-white icon-md"> play_circle </span>',this.showTime(),this.pauseAllDynamicElements()}},{key:"pauseVideo",value:function(e){var t=-(this.timeline[e].startTime-this.progressTime)/1e3,n=document.getElementById("element-".concat(e)).querySelector("video");n.currentTime=t,n.pause()}},{key:"pauseAudio",value:function(e){document.getElementById("element-".concat(e)).querySelector("audio").pause()}},{key:"pauseAllDynamicElements",value:function(){var e;for(e in this.timeline){var t=this.timeline[e].filetype;"video"==t?this.pauseVideo(e):"audio"==t&&this.pauseAudio(e)}}},{key:"deactivateAllOutline",value:function(){for(var e in this.timeline)Object.hasOwnProperty.call(this.timeline,e)&&document.querySelector("#element-".concat(e)).classList.remove("element-outline");this.activeElementId="",this.existActiveElement=!1}},{key:"reset",value:function(){this.progress=0,this.progressTime=0,this.stop(),this.showTime(),this.appearAllElementInTime(),this.timelineCursor.move(0)}},{key:"handleClickPreview",value:function(){this.deactivateAllOutline()}},{key:"connectedCallback",value:function(){document.querySelector("#preview").addEventListener("click",this.handleClickPreview.bind(this))}}]),i}($e(HTMLElement)),ot=function(e){Je(n,e);var t=Qe(n);function n(){var e;return Xe(this,n),(e=t.call(this)).timeline=document.querySelector("element-timeline").timeline,e.elementControl=document.querySelector("element-control"),e.elementId=e.getAttribute("element-id"),e.elementFiletype=e.getAttribute("element-filetype")||"image",e.isDrag=!1,e.isResize=!1,e.isRotate=!1,e.initialPosition={x:0,y:0,w:0,h:0},e.resizeDirection="n",e.resizeEventHandler,e.rotateEventHandler,e.dragdownEventHandler,e.dragupEventHandler,e}return Ke(n,[{key:"render",value:function(){var e;"image"==this.elementFiletype?e=this.templateImage()+this.templateResize():"video"==this.elementFiletype?e=this.templateVideo()+this.templateResize():"text"==this.elementFiletype?e=this.templateText()+this.templateResize("horizon"):"audio"==this.elementFiletype&&(e=this.templateAudio()),this.innerHTML=e;var t=this.convertAbsoluteToRelativeSize({x:this.timeline[this.elementId].location.x,y:this.timeline[this.elementId].location.y,w:this.timeline[this.elementId].width?this.timeline[this.elementId].width:500,h:this.timeline[this.elementId].height});if(this.classList.add("element-drag"),this.setAttribute("id","element-".concat(this.elementId)),"text"!==this.elementFiletype)this.setAttribute("style","width: ".concat(t.w,"px; top: ").concat(t.y,"px; left: ").concat(t.x,"px; height: ").concat(t.h,"px; transform: rotate(").concat(this.timeline[this.elementId].rotation,"deg);"));else if("text"==this.elementFiletype){var n=this.elementControl.previewRatio,i=this.timeline[this.elementId].fontsize/n;this.setAttribute("style","width: ".concat(t.w,"px; left: ").concat(t.x,"px; height: ").concat(i,"px; font-size: ").concat(i,"px;")),this.elementControl.changeTextFont({elementId:this.elementId,fontPath:this.timeline[this.elementId].fontpath,fontType:this.timeline[this.elementId].fonttype,fontName:this.timeline[this.elementId].fontname})}}},{key:"convertAbsoluteToRelativeSize",value:function(e){var t=e.x,n=e.y,i=e.w,r=e.h,o=this.elementControl.previewRatio;return{x:t/o,y:n/o,w:i/o,h:r/o}}},{key:"convertRelativeToAbsoluteSize",value:function(e){var t=e.x,n=e.y,i=e.w,r=e.h,o=this.elementControl.previewRatio;return{x:t*o,y:n*o,w:i*o,h:r*o}}},{key:"templateImage",value:function(){return'<img src="'.concat(this.timeline[this.elementId].blob,'" alt="" class="element-image" draggable="false">')}},{key:"templateVideo",value:function(){return'<video src="'.concat(this.timeline[this.elementId].blob,'" alt="" class="element-video" draggable="false"></video>')}},{key:"templateAudio",value:function(){return'<audio src="'.concat(this.timeline[this.elementId].blob,'" class="d-none" draggable="false"></video>')}},{key:"templateText",value:function(){return'<input-text element-id="'.concat(this.elementId,'" init-value="').concat(this.timeline[this.elementId].text,'" init-color="').concat(this.timeline[this.elementId].textcolor,'"></input-text>')}},{key:"templateResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full",t={n:'<div class="resize-n" onmousedown="this.parentNode.resizeMousedown(\'n\')"></div>',s:'<div class="resize-s" onmousedown="this.parentNode.resizeMousedown(\'s\')"></div>',w:'<div class="resize-w" onmousedown="this.parentNode.resizeMousedown(\'w\')"></div>',e:'<div class="resize-e" onmousedown="this.parentNode.resizeMousedown(\'e\')"></div>',ne:'<div class="resize-ne" onmousedown="this.parentNode.resizeMousedown(\'ne\')"></div>',nw:'<div class="resize-nw" onmousedown="this.parentNode.resizeMousedown(\'nw\')"></div>',se:'<div class="resize-se" onmousedown="this.parentNode.resizeMousedown(\'se\')"></div>',sw:'<div class="resize-sw" onmousedown="this.parentNode.resizeMousedown(\'sw\')"></div>'};return"full"==e?"\n            ".concat(t.n,"\n            ").concat(t.s,"\n            ").concat(t.w,"\n            ").concat(t.e,"\n            ").concat(t.ne,"\n            ").concat(t.nw,"\n            ").concat(t.se,"\n            ").concat(t.sw,"\n            "):"vertical"==e?"\n            ".concat(t.n,"\n            ").concat(t.s,"\n            "):"horizon"==e?"\n            ".concat(t.w,"\n            ").concat(t.e,"\n            "):void 0}},{key:"templateRotate",value:function(){return'<div class="handle-rotate text-center" onmousedown="this.parentNode.rotateMousedown()">\n        <span class="material-symbols-outlined handle-rotate-icon">\ncached\n</span>\n        </div>'}},{key:"pxToInteger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px";return Number(e.split("px")[0])}},{key:"showDragAlignmentGuide",value:function(){var e=document.querySelector("drag-alignment-guide"),t=document.querySelector("#video"),n=Number(t.style.width.split("px")[0]),i=Number(t.style.height.split("px")[0]),r=Number(this.style.top.split("px")[0]),o=Number(this.style.left.split("px")[0]),a=Number(this.style.width.split("px")[0]),l=Number(this.style.height.split("px")[0]),c=Number(this.style.height.split("px")[0])/2+Number(this.style.top.split("px")[0]),u=Number(this.style.width.split("px")[0])/2+Number(this.style.left.split("px")[0]);if(r<6&&r>-6){e.showGuide({position:"top"}),this.style.top="".concat(0,"px");var s=this.convertRelativeToAbsoluteSize({y:0});this.timeline[this.elementId].location.y=s.y}else e.hideGuide({position:"top"});if(r+l>i-6&&r+l<i+6){e.showGuide({position:"bottom"});var f=i-l;this.style.top="".concat(f,"px");var h=this.convertRelativeToAbsoluteSize({y:f});this.timeline[this.elementId].location.y=h.y}else e.hideGuide({position:"bottom"});if(o<6&&o>-6){e.showGuide({position:"left"}),this.style.left="".concat(0,"px");var d=this.convertRelativeToAbsoluteSize({x:0});this.timeline[this.elementId].location.x=d.x}else e.hideGuide({position:"left"});if(o+a>n-6&&o+a<n+6){e.showGuide({position:"right"});var p=n-a;this.style.left="".concat(p,"px");var m=this.convertRelativeToAbsoluteSize({x:p});this.timeline[this.elementId].location.x=m.x}else e.hideGuide({position:"right"});if(c<i/2+6&&c>i/2-6){e.showGuide({position:"horizontal"});var y=i/2-l/2;this.style.top="".concat(y,"px");var v=this.convertRelativeToAbsoluteSize({y});this.timeline[this.elementId].location.y=v.y}else e.hideGuide({position:"horizontal"});if(u<n/2+6&&u>n/2-6){e.showGuide({position:"vertical"});var b=n/2-a/2;this.style.left="".concat(b,"px");var g=this.convertRelativeToAbsoluteSize({x:b});this.timeline[this.elementId].location.x=g.x}else e.hideGuide({position:"vertical"})}},{key:"hideDragAlignmentGuide",value:function(){var e=document.querySelector("drag-alignment-guide");e.hideGuide({position:"top"}),e.hideGuide({position:"bottom"}),e.hideGuide({position:"left"}),e.hideGuide({position:"right"}),e.hideGuide({position:"horizontal"}),e.hideGuide({position:"vertical"})}},{key:"drag",value:function(e){if(this.isDrag){for(var t=e.clientX-this.initialPosition.x,n=e.clientY-this.initialPosition.y,i=["img","video","input"],r=0;r<i.length;r++)this.querySelector(i[r]);t>window.innerWidth?document.removeEventListener("mousemove",this.dragdownEventHandler):(this.changeLocation({x:t,y:n}),"image"==this.elementFiletype&&document.querySelector("option-image").updateValue()),this.showDragAlignmentGuide()}}},{key:"changeLocation",value:function(e){var t=e.x,n=e.y;this.style.top="".concat(n,"px"),this.style.left="".concat(t,"px");var i=this.convertRelativeToAbsoluteSize({x:t,y:n});this.timeline[this.elementId].location.x=i.x,this.timeline[this.elementId].location.y=i.y}},{key:"dragMousedown",value:function(e){this.isResize||this.isRotate||(this.isDrag=!0,this.initialPosition.x=e.pageX-this.pxToInteger(this.style.left),this.initialPosition.y=e.pageY-this.pxToInteger(this.style.top),this.dragdownEventHandler=this.drag.bind(this),document.addEventListener("mousemove",this.dragdownEventHandler))}},{key:"dragMouseup",value:function(){this.hideDragAlignmentGuide(),document.removeEventListener("mousemove",this.dragdownEventHandler),1==this.isDrag&&"image"==this.timeline[this.elementId].filetype&&this.addAnimationPoint({animationType:"position"}),this.isDrag=!1}},{key:"addAnimationPoint",value:function(e){var t=this,n=e.animationType;if(0==this.timeline[this.elementId].animation[n].isActivate)return 0;Number(document.querySelector("element-timeline-range").value);var i=document.querySelector('keyframe-editor[element-id="'.concat(this.elementId,'"]')),r=(this.elementControl.progressTime-this.timeline[this.elementId].startTime)/5;({position:function(){i.addPoint({x:r,y:t.timeline[t.elementId].location.x,line:0}),i.addPoint({x:r,y:t.timeline[t.elementId].location.y,line:1}),i.drawLine(0),i.drawLine(1)}})[n](),document.querySelector('animation-panel[element-id="'.concat(this.elementId,'"]')).updateItem()}},{key:"getGcd",value:function(e,t){return 0==t?e:this.getGcd(t,e%t)}},{key:"rotate",value:function(e){if(this.isDrag=!1,console.log("rotate",e.target.tagName),"CANVAS"!=e.target.tagName)return 0;var t=this.convertAbsoluteToRelativeSize({x:this.timeline[this.elementId].location.x+this.timeline[this.elementId].width/2,y:this.timeline[this.elementId].location.y+this.timeline[this.elementId].height/2}),n=e.offsetX,i=e.offsetY,r=-Math.atan2(t.x-n,t.y-i)/(Math.PI/180);console.log(),r<0&&(r=360+r),this.timeline[this.elementId].rotation=r,this.style.transform="rotate(".concat(r,"deg)")}},{key:"resize",value:function(e){this.isDrag=!1;var t=document.querySelector("#video").getBoundingClientRect(),n=e.pageX-t.left-this.initialPosition.x,i=e.pageY-t.top-this.initialPosition.y;switch(this.initialPosition.w,this.initialPosition.h,this.resizeDirection){case"n":this.resizeStyle({y:this.initialPosition.y+i,h:this.initialPosition.h-i});break;case"s":this.resizeStyle({y:this.initialPosition.y,h:i});break;case"w":this.resizeStyle({x:this.initialPosition.x+n,w:this.initialPosition.w-n});break;case"e":this.resizeStyle({x:this.initialPosition.x,w:n});break;case"ne":this.resizeStyle({y:this.initialPosition.y+i,h:this.initialPosition.h-i,w:n});break;case"nw":this.resizeStyle({x:this.initialPosition.x+n,y:this.initialPosition.y+i,h:this.initialPosition.h-i,w:this.initialPosition.w-n});break;case"sw":this.resizeStyle({x:this.initialPosition.x+n,h:i,w:this.initialPosition.w-n});break;case"se":this.resizeStyle({x:this.initialPosition.x,y:this.initialPosition.y,h:i,w:n})}var r=this.elementControl.previewRatio;this.timeline[this.elementId].location.y=Math.round(Number(this.style.top.split("px")[0])*r),this.timeline[this.elementId].location.x=Math.round(Number(this.style.left.split("px")[0])*r),this.timeline[this.elementId].width=Math.round(Number(this.style.width.split("px")[0])*r),this.timeline[this.elementId].height=Math.round(Number(this.style.height.split("px")[0])*r)}},{key:"resizeStyle",value:function(e){var t=e.x,n=e.y,i=e.w,r=e.h;this.style.left=0==!t?"".concat(t,"px"):this.style.left,this.style.top=0==!n?"".concat(n,"px"):this.style.top,this.style.width=0==!i?"".concat(i,"px"):this.style.width,this.style.height=0==!r?"".concat(r,"px"):this.style.height}},{key:"resizeFont",value:function(e){var t=e.px;if(!this.querySelector("input-text"))return 0;this.querySelector("input-text"),this.style.fontSize="".concat(t,"px"),this.elementControl.changeTextSize({elementId:this.elementId,size:this.timeline[this.elementId].fontsize})}},{key:"rotateMousedown",value:function(){this.isDrag=!1,this.isResize=!1,0==this.isRotate&&(this.rotateEventHandler=this.rotate.bind(this),document.querySelector("#preview").addEventListener("mousemove",this.rotateEventHandler)),this.isRotate=!0}},{key:"rotateMouseup",value:function(){document.querySelector("#preview").removeEventListener("mousemove",this.rotateEventHandler),this.isRotate=!1}},{key:"resizeMousedown",value:function(e){this.isDrag=!1,this.isResize=!0,this.resizeDirection=e,this.initialPosition.w=Number(this.style.width.split("px")[0]),this.initialPosition.h=Number(this.style.height.split("px")[0]),this.initialPosition.x=Number(this.style.left.split("px")[0]),this.initialPosition.y=Number(this.style.top.split("px")[0]),this.resizeEventHandler=this.resize.bind(this),document.addEventListener("mousemove",this.resizeEventHandler)}},{key:"resizeMouseup",value:function(){document.removeEventListener("mousemove",this.resizeEventHandler),this.isResize=!1}},{key:"activateOutline",value:function(){this.elementControl.deactivateAllOutline(),this.elementControl.activeElementId=this.elementId,this.elementControl.existActiveElement=!0,this.classList.add("element-outline")}},{key:"showSideOption",value:function(){document.querySelector("option-group").showOption({filetype:this.elementFiletype,elementId:this.elementId})}},{key:"handleMousedown",value:function(e){this.dragMousedown(e),this.activateOutline(e),this.showSideOption()}},{key:"handleDoubleClick",value:function(e){}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mousedown",this.handleMousedown.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),document.addEventListener("mouseup",this.resizeMouseup.bind(this)),document.addEventListener("mouseup",this.rotateMouseup.bind(this)),document.addEventListener("mouseup",this.dragMouseup.bind(this))}}]),n}($e(HTMLElement)),at=function(e){Je(n,e);var t=Qe(n);function n(){var e;return Xe(this,n),(e=t.call(this)).videoCanvas=document.querySelector("#video"),e.allPositions=["top","bottom","left","right","horizontal","vertical"],e}return Ke(n,[{key:"addGuide",value:function(){for(var e=0;e<this.allPositions.length;e++){var t=this.allPositions[e];document.querySelector("#video").insertAdjacentHTML("beforeend",'<alignment-guide position="'.concat(t,'" class="alignment-guide alignment-guide-').concat(t,'"></alignment-guide>')),this.hideGuide({position:t})}}},{key:"hideGuide",value:function(e){var t=e.position;document.querySelector("#video").querySelector("alignment-guide[position='".concat(t,"']")).classList.add("d-none")}},{key:"showGuide",value:function(e){var t=e.position;document.querySelector("#video").querySelector("alignment-guide[position='".concat(t,"']")).classList.remove("d-none")}},{key:"connectedCallback",value:function(){this.addGuide()}}]),n}($e(HTMLElement));function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==lt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==lt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===lt(r)?r:String(r)),i)}var r}function ut(e,t){if(t&&("object"===lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function st(e){var t="function"==typeof Map?new Map:void 0;return st=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ft(e,arguments,pt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),dt(n,e)},st(e)}function ft(e,t,n){return ft=ht()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&dt(r,n.prototype),r},ft.apply(null,arguments)}function ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function dt(e,t){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dt(e,t)}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(a,e);var t,n,i,r,o=(t=a,n=ht(),function(){var e,i=pt(t);if(n){var r=pt(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return ut(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).timeline=document.querySelector("element-timeline").timeline,e.elementId=e.getAttribute("element-id"),e.animationType=e.getAttribute("animation-type"),e.tension=1,e.divBody=void 0,e.svgBody={},e.poly={},e.path={},e.hiddenPath={},e.padding={start:0,end:0},e.lineCount=1,e.points=[[[0,0]],[[0,0]]],e.selectLine=0,e}return i=a,r=[{key:"render",value:function(){this.showKeyframeEditorButtonGroup();var e=this.template();this.innerHTML=e,this.divBody=this.querySelector("div"),this.svgBody=this.divBody.querySelector("svg"),this.keyframePointBody=this.divBody.querySelector("keyframe-point"),this.lineCount=this.timeline[this.elementId].animation[this.animationType].points.length,0==this.timeline[this.elementId].animation[this.animationType].isActivate?(this.points[0][0][1]=this.timeline[this.elementId].location.x,this.points[1][0][1]=this.timeline[this.elementId].location.y):(this.points[0][0][1]=this.timeline[this.elementId].animation[this.animationType].points[0][0][1],this.points[1][0][1]=this.timeline[this.elementId].animation[this.animationType].points[1][0][1]),this.timeline[this.elementId].animation[this.animationType].isActivate=!0,this.clearLineEditorGroup();for(var t=0;t<this.lineCount;t++)this.addLineEditor(t),this.drawLine(t,!0),this.loadPoint(t);var n=Number(document.querySelector("element-timeline-range").value)/4;this.addPadding({px:this.timeline[this.elementId].startTime/5*n,type:"start"}),this.querySelector("div").classList.add("position-relative"),this.classList.add("h-100","w-100","position-absolute","overflow-scroll"),document.querySelector('animation-panel[element-id="'.concat(this.elementId,'"]')).updateItem(),this.fillBackground()}},{key:"template",value:function(){return'\n        <div>\n        <keyframe-padding class="keyframe-padding" style="width: 100px;"></keyframe-padding>\n        <svg class="keyframe-svg" style="left: 100px;">\n\n        </svg>\n        <keyframe-point style="left: 100px;" class="position-absolute"></keyframe-point>\n\n        </div>'}},{key:"showKeyframeEditorButtonGroup",value:function(){document.querySelector("#keyframeEditorButtonGroup").classList.remove("d-none")}},{key:"hideKeyframeEditorButtonGroup",value:function(){document.querySelector("#keyframeEditorButtonGroup").classList.add("d-none");var e=document.getElementById("option_bottom");e.classList.remove("show"),e.classList.add("hide")}},{key:"fillBackground",value:function(){var e=this;setTimeout((function(){e.querySelector("div").style.height="".concat(e.scrollHeight,"px"),console.log("scrollHeight",e.scrollHeight)}),100)}},{key:"addPadding",value:function(e){var t=e.px,n=e.type,i=this.divBody.querySelector("keyframe-padding"),r=this.keyframePointBody,o=this.svgBody,a={start:function(){i.style.width="".concat(t,"px"),r.style.left="".concat(t,"px"),o.style.left="".concat(t,"px")}};this.padding.start=t,a[n]()}},{key:"highlightLineEditorButton",value:function(e){for(var t=0;t<this.lineCount;t++){var n=document.querySelector("#timelineOptionLineEditor").querySelector("button[line='".concat(t,"']"));n.classList.remove("btn-primary"),n.classList.add("btn-secondary")}var i=document.querySelector("#timelineOptionLineEditor").querySelector("button[line='".concat(e,"']"));i.classList.remove("btn-secondary"),i.classList.add("btn-primary")}},{key:"changeLineEditor",value:function(e){this.selectLine=Number(e),this.highlightLineEditorButton(e)}},{key:"addLineEditor",value:function(e){document.querySelector("#timelineOptionLineEditor").insertAdjacentHTML("beforeend",'<button line="'.concat(e,"\" onclick=\"document.querySelector('keyframe-editor').changeLineEditor('").concat(e,'\')" type="button" class="btn btn-secondary btn-sm">Line').concat(e,"</button>"))}},{key:"clearLineEditorGroup",value:function(){document.querySelector("#timelineOptionLineEditor").innerHTML=""}},{key:"loadPoint",value:function(e){if(1==this.timeline[this.elementId].animation[this.animationType].isActivate){for(var t=this.timeline[this.elementId].animation[this.animationType].points[e],n=0;n<t.length;n++){var i=t[n];0!=i[0]&&this.addPoint({x:i[0],y:i[1],line:e})}this.drawLine(e,!0),this.fillBackground()}}},{key:"addPoint",value:function(e){var t=e.x,n=e.y,i=e.line;this.insertPointInMiddle({x:Math.round(t),y:Math.round(n),line:i}),this.drawPoint({x:t,y:n,line:i}),this.points[i][this.points[i].length-1][0],this.timeline[this.elementId].animation[this.animationType].isActivate=!0,this.timeline[this.elementId].animation[this.animationType].points[i]=this.points[i]}},{key:"drawPoint",value:function(e){var t=e.x,n=e.y,i=(e.line,n-4),r=(t-4)*(Number(document.querySelector("element-timeline-range").value)/4);this.keyframePointBody.insertAdjacentHTML("beforeend",'<div class="position-absolute keyframe-point" style="top: '.concat(i,"px; left: ").concat(r,'px;"></div>'))}},{key:"insertPointInMiddle",value:function(e){var t=e.x,n=e.y,i=e.line;if(this.points[i].length-1==0)return this.points[i].push([t,n]),0;for(var r=0;r<this.points[i].length;r++){if(this.points[i].length-1==r)return this.points[i].splice(r+1,0,[t,n]),0;if(this.points[i][r][0]<t&&this.points[i][r+1][0]>t)return this.points[i].splice(r+1,0,[t,n]),0}}},{key:"getRemovedDuplicatePoint",value:function(e){var t=e.x,n=e.line,i=[];return this.points[n].forEach((function(e){e[0]!=t&&i.push(e)})),i}},{key:"drawLine",value:function(e){this.querySelector("svg").insertAdjacentHTML("beforeend",'\n        <polyline id="keyframePolyline'.concat(e,'" />\n        <path id="keyframePath').concat(e,'" class="keyframe-path-').concat(e+1,'" />\n        <path id="keyframeHiddenPath').concat(e,'" class="d-none" />'));for(var t=Number(document.querySelector("element-timeline-range").value)/4,n=[],i=0;i<this.points[e].length;i++)n.push([this.points[e][i][0]*t,this.points[e][i][1]]);this.path[e]=this.svgBody.querySelector("path[id='keyframePath".concat(e,"']")),this.path[e].setAttribute("d",this.drawPath(n,this.tension)),this.hiddenPath[e]=this.svgBody.querySelector("path[id='keyframeHiddenPath".concat(e,"']")),this.hiddenPath[e].setAttribute("d",this.drawPath(this.points[e],this.tension));var r=this.points[e][this.points[e].length-1][0]-1,o=this.getInterpolatedPoints(r,e,n);this.timeline[this.elementId].animation[this.animationType].allpoints[e]=o}},{key:"drawPath",value:function(e,t){null==t&&(t=1);for(var n=2*e.length,i=n-4,r="M"+[e[0][0],e[0][1]],o=0,a=0;a<n-2;a+=2){var l=o?e[o-1][0]:e[0][0],c=o?e[o-1][1]:e[0][1],u=e[o][0],s=e[o][1],f=e[o+1][0],h=e[o+1][1],d=a!==i?e[o+2][0]:f,p=a!==i?e[o+2][1]:h;o+=1,r+="C"+[u+(f-l)/6*t,s+(h-c)/6*t,f-(d-u)/6*t,h-(p-s)/6*t,f,h]}return r}},{key:"getPointAt",value:function(e,t){for(var n=0,i=this.hiddenPath[t].getTotalLength(),r=(n+i)/2,o=this.hiddenPath[t].getPointAtLength(r);Math.abs(o.x-e)>.5;)o.x<e?n=r:i=r,r=(n+i)/2,o=this.hiddenPath[t].getPointAtLength(r);return{x:o.x,y:o.y}}},{key:"getInterpolatedPoints",value:function(e,t){for(var n=[],i=0,r=0;r<Math.round(e/4);r++)n.push(this.getPointAt(i,t)),i+=4;return n}},{key:"handleMousedown",value:function(e){var t=Number(document.querySelector("element-timeline-range").value)/4,n=e.offsetX/t,i=e.offsetY;this.addPoint({x:n,y:i,line:this.selectLine}),this.drawLine(this.selectLine,!0),document.querySelector('animation-panel[element-id="'.concat(this.elementId,'"]')).updateItem()}},{key:"handleScroll",value:function(e){if(0==document.querySelector("#option_bottom").classList.contains("show"))return 0;var t=document.querySelector("element-timeline");t.scrollTo(this.scrollLeft,t.scrollTop)}},{key:"connectedCallback",value:function(){this.render(),this.svgBody.addEventListener("mousedown",this.handleMousedown.bind(this)),this.addEventListener("scroll",this.handleScroll.bind(this))}}],r&&ct(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(st(HTMLElement));function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==yt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==yt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===yt(r)?r:String(r)),i)}var r}function gt(e,t,n){return t&&bt(e.prototype,t),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ot(e,t)}function St(e){var t=kt();return function(){var n,i=Pt(e);if(t){var r=Pt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return xt(this,n)}}function xt(e,t){if(t&&("object"===yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tt(e){var t="function"==typeof Map?new Map:void 0;return Tt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Et(e,arguments,Pt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ot(n,e)},Tt(e)}function Et(e,t,n){return Et=kt()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Ot(r,n.prototype),r},Et.apply(null,arguments)}function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ot(e,t){return Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ot(e,t)}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}var Lt=function(e){wt(n,e);var t=St(n);function n(){var e;return vt(this,n),(e=t.call(this)).x=e.getAttribute("top"),e.y=e.getAttribute("left"),e}return gt(n,[{key:"render",value:function(){var e=this.innerHTML,t=this.template();this.innerHTML=t,this.style.display="inline-block",this.querySelector("ul").innerHTML=e}},{key:"template",value:function(){return'\n        <ul class="dropdown-menu show position-absolute " style="top: '.concat(this.x,"px; left: ").concat(this.y,'px; z-index: 6000;">\n\n        </ul>')}},{key:"mousedown",value:function(){var e=this;setTimeout((function(){e.remove()}),200)}},{key:"connectedCallback",value:function(){this.render(),document.addEventListener("click",this.mousedown.bind(this))}},{key:"disconnectedCallback",value:function(){document.removeEventListener("click",this.mousedown.bind(this))}}]),n}(Tt(HTMLElement)),jt=function(e){wt(n,e);var t=St(n);function n(){var e;return vt(this,n),(e=t.call(this)).name=e.getAttribute("item-name")||"untitle",e}return gt(n,[{key:"render",value:function(){var e=this.template();this.innerHTML=e}},{key:"template",value:function(){return'<li><a class="dropdown-item">'.concat(this.name,"</a></li>")}},{key:"connectedCallback",value:function(){this.render()}}]),n}(Tt(HTMLElement));function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==It(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==It(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===It(r)?r:String(r)),i)}var r}function Mt(e,t,n){return t&&Rt(e.prototype,t),n&&Rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}function At(e){var t=zt();return function(){var n,i=Bt(e);if(t){var r=Bt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ct(this,n)}}function Ct(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nt(e){var t="function"==typeof Map?new Map:void 0;return Nt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ht(e,arguments,Bt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Dt(n,e)},Nt(e)}function Ht(e,t,n){return Ht=zt()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Dt(r,n.prototype),r},Ht.apply(null,arguments)}function zt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Dt(e,t){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dt(e,t)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}var Ft=function(e){_t(n,e);var t=At(n);function n(){var e;return qt(this,n),(e=t.call(this)).elementId=e.getAttribute("element-id"),e.isShow=!1,e}return Mt(n,[{key:"render",value:function(){var e=this.innerHTML,t=this.template();this.innerHTML=t,this.hide(),this.style.display="inline-block",this.classList.add("position-relative","w-100","bg-dark"),this.querySelector("div").innerHTML=e}},{key:"updateItem",value:function(){var e=this.querySelector("div").innerHTML;this.clearItem();var t=this.template();this.innerHTML=t,this.querySelector("div").innerHTML=e}},{key:"move",value:function(e){this.style.left="".concat(e,"px")}},{key:"clearItem",value:function(){this.innerHTML=""}},{key:"show",value:function(){this.classList.remove("d-none"),this.isShow=!0,this.updateItem()}},{key:"hide",value:function(){this.classList.add("d-none"),this.isShow=!1}},{key:"template",value:function(){return'<div class="bg-dark">  </div>'}},{key:"connectedCallback",value:function(){this.render()}},{key:"disconnectedCallback",value:function(){}}]),n}(Nt(HTMLElement)),Gt=function(e){_t(n,e);var t=At(n);function n(){var e;return qt(this,n),(e=t.call(this)).animationType=e.getAttribute("animation-type"),e.elementId=e.getAttribute("element-id"),e.timeline=document.querySelector("element-timeline").timeline,e}return Mt(n,[{key:"render",value:function(){if(0==this.checkAnimationType())return 0;this.style.width="100%",this.style.height="1.5rem",this.style.display="inline-block",this.classList.add("position-relative","d-flex","align-items-center"),this.clearPoints(),this.insertPointFromTimeline()}},{key:"insertPointFromTimeline",value:function(){for(var e=Number(document.querySelector("element-timeline-range").value)/4,t=this.timeline[this.elementId].animation[this.animationType].points[0],n=0;n<t.length;n++){var i=t[n][0]*e;this.addPoint(i)}}},{key:"clearPoints",value:function(){this.innerHTML=""}},{key:"addPoint",value:function(e){this.insertAdjacentHTML("beforeend",'<div class="text-light position-absolute keyframe-diamond" style="left: '.concat(e,'px;">panel item </div>'))}},{key:"checkAnimationType",value:function(){return["position","opacity"].includes(this.animationType)}},{key:"showMenuDropdown",value:function(e){var t=e.x,n=e.y;document.querySelector("#menuRightClick").innerHTML='<menu-dropdown-body top="'.concat(n,'" left="').concat(t,"\">\n            <menu-dropdown-item onclick=\"document.querySelector('element-timeline').showKeyframeEditor('").concat(this.elementId,"', '").concat(this.animationType,'\')" item-name="키프레임 편집"></menu-dropdown-item>\n        </menu-dropdown-body>')}},{key:"handleMouseup",value:function(e){this.rightclick(e)}},{key:"rightclick",value:function(e){if(3!=e.which&&2!=e.button)return 0;this.showMenuDropdown({x:e.clientX,y:e.clientY})}},{key:"connectedCallback",value:function(){this.render(),this.addEventListener("mouseup",this.handleMouseup.bind(this))}},{key:"disconnectedCallback",value:function(){this.removeEventListener("mouseup",this.handleMouseup)}}]),n}(Nt(HTMLElement));function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Ut(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Ut(r)?r:String(r)),i)}var r}function Wt(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xt(e){var t="function"==typeof Map?new Map:void 0;return Xt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Yt(e,arguments,Qt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Jt(n,e)},Xt(e)}function Yt(e,t,n){return Yt=Kt()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Jt(r,n.prototype),r},Yt.apply(null,arguments)}function Kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Jt(e,t){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jt(e,t)}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}var Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Kt(),function(){var e,i=Qt(t);if(n){var r=Qt(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Wt(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this)}return i=a,(r=[{key:"render",value:function(){}},{key:"showOption",value:function(e){var t=e.filetype,n=e.elementId;this.hideAllOptions(),this.querySelector("option-".concat(t)).show(),this.querySelector("option-".concat(t)).setElementId({elementId:n})}},{key:"hideAllOptions",value:function(){for(var e in this.children)if(Object.hasOwnProperty.call(this.children,e)){var t=this.children[e];console.log(t,this.children),t.hide()}}},{key:"connectedCallback",value:function(){this.render()}}])&&Vt(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Xt(HTMLElement));function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function en(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==$t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==$t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===$t(r)?r:String(r)),i)}var r}function tn(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nn(e){var t="function"==typeof Map?new Map:void 0;return nn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return rn(e,arguments,ln(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),an(n,e)},nn(e)}function rn(e,t,n){return rn=on()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&an(r,n.prototype),r},rn.apply(null,arguments)}function on(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function an(e,t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},an(e,t)}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}var cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(a,e);var t,n,i,r,o=(t=a,n=on(),function(){var e,i=ln(t);if(n){var r=ln(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return tn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).elementId="",e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.hide()}},{key:"template",value:function(){return'<div class="mb-2">\n        <label class="form-label text-light">텍스트 색상 선택</label>\n        <input aria-event="font-color" type="color" class="form-control bg-default form-control-color" value="#ffffff" title="Choose your color">\n    </div>\n\n    <div class="mb-2">\n        <label class="form-label text-light">폰트 크기</label>\n        <input aria-event="font-size" type="number" class="form-control bg-default text-light" value="52" >\n    </div>\n\n    <div class="mb-2">\n        <label class="form-label text-light">폰트</label>\n        <select-font></select-font>\n    </div>\n\n    \n    \n    '}},{key:"hide",value:function(){this.classList.add("d-none")}},{key:"show",value:function(){this.classList.remove("d-none")}},{key:"setElementId",value:function(e){var t=e.elementId;this.elementId=t,this.resetValue()}},{key:"resetValue",value:function(){var e=document.querySelector("element-timeline").timeline;this.querySelector("input[aria-event='font-color'").value=e[this.elementId].textcolor,this.querySelector("input[aria-event='font-size'").value=e[this.elementId].fontsize}},{key:"handleChangeTextColor",value:function(){var e=document.querySelector("element-control"),t=this.querySelector("input[aria-event='font-color'").value;e.changeTextColor({elementId:this.elementId,color:t})}},{key:"handleChangeTextSize",value:function(){var e=document.querySelector("element-control"),t=this.querySelector("input[aria-event='font-size'").value;e.changeTextSize({elementId:this.elementId,size:t})}},{key:"handleChangeTextFont",value:function(){var e=this.querySelector("select-font");document.querySelector("element-control").changeTextFont({elementId:this.elementId,fontPath:e.path,fontType:e.type,fontName:e.fontname})}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("input[aria-event='font-color'").addEventListener("input",this.handleChangeTextColor.bind(this)),this.querySelector("input[aria-event='font-size'").addEventListener("change",this.handleChangeTextSize.bind(this)),this.querySelector("select-font").addEventListener("onChangeSelect",this.handleChangeTextFont.bind(this))}}])&&en(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(nn(HTMLElement));function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==un(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===un(r)?r:String(r)),i)}var r}function fn(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hn(e){var t="function"==typeof Map?new Map:void 0;return hn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return dn(e,arguments,yn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mn(n,e)},hn(e)}function dn(e,t,n){return dn=pn()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&mn(r,n.prototype),r},dn.apply(null,arguments)}function pn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mn(e,t){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mn(e,t)}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}var vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(a,e);var t,n,i,r,o=(t=a,n=pn(),function(){var e,i=yn(t);if(n){var r=yn(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return fn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).elementId="",e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.hide()}},{key:"template",value:function(){return'\n        <label class="form-label text-light">위치</label>\n        <div class="d-flex flex-row bd-highlight mb-2">\n        <input aria-event="location-x" type="number" class="form-control bg-default text-light me-1" value="0" >\n        <input aria-event="location-y" type="number" class="form-control bg-default text-light" value="0" >\n\n        </div>'}},{key:"hide",value:function(){this.classList.add("d-none")}},{key:"show",value:function(){this.classList.remove("d-none")}},{key:"setElementId",value:function(e){var t=e.elementId;this.elementId=t,this.updateValue()}},{key:"updateValue",value:function(){var e=document.querySelector("element-timeline").timeline;this.querySelector("input[aria-event='location-x'").value=e[this.elementId].location.x,this.querySelector("input[aria-event='location-y'").value=e[this.elementId].location.y}},{key:"handleLocation",value:function(){document.querySelector("element-control");var e=document.querySelector("element-control-asset[element-id='".concat(this.elementId,"']")),t=this.querySelector("input[aria-event='location-x'").value,n=this.querySelector("input[aria-event='location-y'").value,i=e.convertAbsoluteToRelativeSize({x:t,y:n});e.changeLocation({x:i.x,y:i.y})}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("input[aria-event='location-x'").addEventListener("change",this.handleLocation.bind(this)),this.querySelector("input[aria-event='location-y'").addEventListener("change",this.handleLocation.bind(this))}}])&&sn(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(hn(HTMLElement));function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==bn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==bn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===bn(r)?r:String(r)),i)}var r}function wn(e,t){if(t&&("object"===bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Sn(e){var t="function"==typeof Map?new Map:void 0;return Sn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return xn(e,arguments,kn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),En(n,e)},Sn(e)}function xn(e,t,n){return xn=Tn()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&En(r,n.prototype),r},xn.apply(null,arguments)}function Tn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function En(e,t){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},En(e,t)}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Tn(),function(){var e,i=kn(t);if(n){var r=kn(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return wn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).elementId="",e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.hide()}},{key:"template",value:function(){return'\n        <label class="form-label text-light">위치</label>\n        <div class="d-flex flex-row bd-highlight mb-2">\n        <input aria-event="location-x" type="number" class="form-control bg-default text-light me-1" value="0" >\n        <input aria-event="location-y" type="number" class="form-control bg-default text-light" value="0" >\n\n        </div>'}},{key:"hide",value:function(){this.classList.add("d-none")}},{key:"show",value:function(){this.classList.remove("d-none")}},{key:"setElementId",value:function(e){var t=e.elementId;this.elementId=t,this.updateValue()}},{key:"updateValue",value:function(){var e=document.querySelector("element-timeline").timeline;this.querySelector("input[aria-event='location-x'").value=e[this.elementId].location.x,this.querySelector("input[aria-event='location-y'").value=e[this.elementId].location.y}},{key:"handleLocation",value:function(){var e=document.querySelector("element-control-asset[element-id='".concat(this.elementId,"']")),t=this.querySelector("input[aria-event='location-x'").value,n=this.querySelector("input[aria-event='location-y'").value,i=e.convertAbsoluteToRelativeSize({x:t,y:n});e.changeLocation({x:i.x,y:i.y})}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("input[aria-event='location-x'").addEventListener("change",this.handleLocation.bind(this)),this.querySelector("input[aria-event='location-y'").addEventListener("change",this.handleLocation.bind(this))}}])&&gn(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Sn(HTMLElement));function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function Ln(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Pn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Pn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Pn(r)?r:String(r)),i)}var r}function jn(e,t){if(t&&("object"===Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function In(e){var t="function"==typeof Map?new Map:void 0;return In=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return qn(e,arguments,_n(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mn(n,e)},In(e)}function qn(e,t,n){return qn=Rn()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Mn(r,n.prototype),r},qn.apply(null,arguments)}function Rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Mn(e,t){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mn(e,t)}function _n(e){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_n(e)}var An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mn(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Rn(),function(){var e,i=_n(t);if(n){var r=_n(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return jn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).elementId="",e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.hide()}},{key:"template",value:function(){return'\n        <label class="form-label text-light">오디오</label>\n        <div class="d-flex flex-row bd-highlight mb-2">\n\n\n        </div>'}},{key:"hide",value:function(){this.classList.add("d-none")}},{key:"show",value:function(){this.classList.remove("d-none")}},{key:"setElementId",value:function(e){var t=e.elementId;this.elementId=t,this.updateValue()}},{key:"updateValue",value:function(){document.querySelector("element-timeline").timeline}},{key:"connectedCallback",value:function(){this.render()}}])&&Ln(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(In(HTMLElement));function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Cn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Cn(r)?r:String(r)),i)}var r}function Hn(e,t){if(t&&("object"===Cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zn(e){var t="function"==typeof Map?new Map:void 0;return zn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Dn(e,arguments,Gn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Fn(n,e)},zn(e)}function Dn(e,t,n){return Dn=Bn()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Fn(r,n.prototype),r},Dn.apply(null,arguments)}function Bn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fn(e,t){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fn(e,t)}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}var Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fn(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Bn(),function(){var e,i=Gn(t);if(n){var r=Gn(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Hn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).value="",e.elementId=e.getAttribute("element-id"),e.initValue=e.getAttribute("init-value")||"",e.initColor=e.getAttribute("init-color")||"#ffffff",e.timeline=document.querySelector("element-timeline").timeline,e.parentInputBox=document.querySelector('element-control-asset[element-id="'.concat(e.elementId,'"]')),e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.style.textAlign="center",this.style.display="flex",this.style.justifyContent="center",this.style.height="100%",this.style.width="100%",this.style.position="absolute",this.style.letterSpacing="1px",this.style.color=this.initColor,this.querySelector("span").style.height="100%",this.querySelector("span").style.outline="none",this.querySelector("span").style.lineHeight="initial",this.querySelector("span").setAttribute("contenteditable",!0),this.setWidthInner()}},{key:"template",value:function(){return"<span>".concat(this.initValue,"</span>")}},{key:"setWidth",value:function(){this.parentInputBox.style.width="".concat(this.offsetWidth,"px")}},{key:"setWidthInner",value:function(){var e=this.parentInputBox.convertRelativeToAbsoluteSize({w:this.querySelector("span").offsetWidth});console.log(e),this.timeline[this.elementId].widthInner=e.w}},{key:"updateText",value:function(e){var t=e.value;this.value=t,this.timeline[this.elementId].text=t,this.updateTextInElementBar()}},{key:"updateTextInElementBar",value:function(){document.querySelector("element-bar[element-id='".concat(this.elementId,"']")).querySelector("span[ref='name']").innerHTML=this.value}},{key:"handleInput",value:function(e){var t=e.currentTarget.textContent;this.updateText({value:t}),this.setWidth(),this.setWidthInner()}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("span").addEventListener("input",this.handleInput.bind(this))}}])&&Nn(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(zn(HTMLElement));function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function Wn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Vn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Vn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Vn(r)?r:String(r)),i)}var r}function Xn(e,t){if(t&&("object"===Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yn(e){var t="function"==typeof Map?new Map:void 0;return Yn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Kn(e,arguments,Zn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qn(n,e)},Yn(e)}function Kn(e,t,n){return Kn=Jn()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Qn(r,n.prototype),r},Kn.apply(null,arguments)}function Jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Qn(e,t){return Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qn(e,t)}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}var $n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qn(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Jn(),function(){var e,i=Zn(t);if(n){var r=Zn(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Xn(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).path="",e.type="",e.fontname="",e.onChangeSelect=new Event("onChangeSelect"),e}return i=a,(r=[{key:"render",value:function(){var e=this.template();this.innerHTML=e,this.insertFontLists()}},{key:"template",value:function(){return"<select ref='lists' class=\"form-select form-control bg-default text-light\" aria-label=\"Default select example\">\n        <option selected>Select</option>\n\n      </select>\n      <style ref='fontStyles'>\n      </style>\n      "}},{key:"insertFontLists",value:function(){var e=this;window.electronAPI.req.font.getLists().then((function(t){if(0==t.status)return 0;for(var n=0;n<t.fonts.length;n++){var i=t.fonts[n];e.querySelector("select[ref='lists']").insertAdjacentHTML("beforeend",'<option value-index="'.concat(n+1,"\" value='").concat(i.path,"'>").concat(i.name,"</option>"))}}))}},{key:"handleSelect",value:function(){this.path=this.querySelector("select[ref='lists']").value,this.fontname=this.querySelector("select[ref='lists']").value.split("/")[this.querySelector("select[ref='lists']").value.split("/").length-1].split(".")[0],this.type=this.querySelector("select[ref='lists']").value.split("/")[this.querySelector("select[ref='lists']").value.split("/").length-1].split(".")[1],this.applyFontStyle({fontName:this.fontname,fontPath:this.path,fontType:this.type}),this.dispatchEvent(this.onChangeSelect)}},{key:"applyFontStyle",value:function(e){var t=e.fontName,n=e.fontPath,i=e.fontType;this.querySelector("style[ref='fontStyles']").insertAdjacentHTML("beforeend",'\n        @font-face {\n            font-family: "'.concat(t,'";\n            src: local("').concat(t,'"),\n              url("').concat(n,'") format("').concat(i,'");\n        }\n        '))}},{key:"connectedCallback",value:function(){this.render(),this.querySelector("select[ref='lists']").addEventListener("change",this.handleSelect.bind(this))}}])&&Wn(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Yn(HTMLElement));function ei(e){return ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(e)}function ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==ei(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==ei(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===ei(r)?r:String(r)),i)}var r}function ni(e,t){if(t&&("object"===ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ii(e){var t="function"==typeof Map?new Map:void 0;return ii=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ri(e,arguments,li(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ai(n,e)},ii(e)}function ri(e,t,n){return ri=oi()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&ai(r,n.prototype),r},ri.apply(null,arguments)}function oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ai(e,t){return ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ai(e,t)}function li(e){return li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},li(e)}var ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ai(e,t)}(a,e);var t,n,i,r,o=(t=a,n=oi(),function(){var e,i=li(t);if(n){var r=li(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return ni(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this)}return i=a,(r=[{key:"render",value:function(){this.innerHTML=this.template(),this.tutorialModal=new bootstrap.Modal(document.querySelector("div[ref='tutorial']"),{keyboard:!1})}},{key:"template",value:function(){return'<div class="modal fade show" ref="tutorial" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">\n        <div class="modal-dialog modal-dialog-centered">\n            <div class="modal-content bg-default">\n                <div class="modal-body text-center text-light bg-default">\n                    <h5 class="modal-title font-weight-lg">너겟 튜토리얼</h5>\n                    <p class="font-weight-md"></p>\n                    <div class="d-flex bd-highlight">\n                    <div class="me-auto p-2 bd-highlight"><button type="button" class="d-flex align-items-center btn btn-sm btn-secondary"><span class="material-symbols-outlined">\n                    arrow_back\n                    </span></button></div>\n\n                    <div class="p-2 bd-highlight"><button type="button" class="d-flex align-items-center btn btn-sm btn-primary"><span class="material-symbols-outlined">\n                    navigate_next\n                    </span></button></div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    </div>'}},{key:"connectedCallback",value:function(){this.render()}}])&&ti(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(ii(HTMLElement));function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==ui(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==ui(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===ui(r)?r:String(r)),i)}var r}function fi(e,t){if(t&&("object"===ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hi(e){var t="function"==typeof Map?new Map:void 0;return hi=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return di(e,arguments,yi(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mi(n,e)},hi(e)}function di(e,t,n){return di=pi()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&mi(r,n.prototype),r},di.apply(null,arguments)}function pi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mi(e,t){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mi(e,t)}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}var vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(a,e);var t,n,i,r,o=(t=a,n=pi(),function(){var e,i=yi(t);if(n){var r=yi(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return fi(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).tutorialIdx=e.getAttribute("tutorial-idx"),e.tutorialTitle=e.getAttribute("tutorial-title"),e.tutorialMessage=e.getAttribute("tutorial-message"),e.tutorialElementId=e.getAttribute("target-element-id"),e}return i=a,(r=[{key:"render",value:function(){var e=document.querySelector("#".concat(this.tutorialElementId));console.log(this.tutorialElementId,e),this.classList.add("tutorial-popover","d-none"),this.style.position="absolute",this.style.top="".concat(e.clientHeight/2,"px"),this.style.left="".concat(e.clientWidth,"px"),this.style.zIndex=7e3,this.innerHTML=this.template()}},{key:"template",value:function(){return'\n        <div class="">\n        '.concat(this.tutorialTitle,": ").concat(this.tutorialMessage,"\n\n        </div>")}},{key:"connectedCallback",value:function(){this.render()}}])&&si(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(hi(HTMLElement));function bi(e){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(e)}function gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==bi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===bi(r)?r:String(r)),i)}var r}function Si(e,t){if(t&&("object"===bi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xi(e){var t="function"==typeof Map?new Map:void 0;return xi=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ti(e,arguments,Oi(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ki(n,e)},xi(e)}function Ti(e,t,n){return Ti=Ei()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&ki(r,n.prototype),r},Ti.apply(null,arguments)}function Ei(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ki(e,t){return ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ki(e,t)}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}var Pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ki(e,t)}(a,e);var t,n,i,r,o=(t=a,n=Ei(),function(){var e,i=Oi(t);if(n){var r=Oi(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return Si(this,e)});function a(){return gi(this,a),o.apply(this,arguments)}return i=a,(r=[{key:"connectedCallback",value:function(){this.message=this.getAttribute("toast-message")||"",this.delay=this.getAttribute("toast-delay")||1e3,this.innerHTML=this.template();var e=this.querySelector("div[ref='toast']");bootstrap.Toast.getOrCreateInstance(e).show()}},{key:"template",value:function(){return'<div ref="toast" class="toast fade" id="saveProject" role="alert" data-bs-animation="true" data-bs-autohide="true" data-bs-delay="'.concat(this.delay,'" aria-live="assertive" aria-atomic="true" style="background-color: rgba(37, 38, 43, 0.73);">\n        <div class="toast-body"> \n            <div class="text-center text-light">').concat(this.message,"</div> \n        </div>\n    </div>")}}])&&wi(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(xi(HTMLElement));function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ii(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==Li(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!==Li(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key,"string"),"symbol"===Li(r)?r:String(r)),i)}var r}function qi(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ri(e){var t="function"==typeof Map?new Map:void 0;return Ri=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Mi(e,arguments,Ci(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ai(n,e)},Ri(e)}function Mi(e,t,n){return Mi=_i()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Ai(r,n.prototype),r},Mi.apply(null,arguments)}function _i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Ci(e){return Ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ci(e)}var Ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(a,e);var t,n,i,r,o=(t=a,n=_i(),function(){var e,i=Ci(t);if(n){var r=Ci(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return qi(this,e)});function a(){return ji(this,a),o.apply(this,arguments)}return i=a,(r=[{key:"connectedCallback",value:function(){if(this.body=document.querySelector("#toast"),null==this.body){var e=document.createElement("div");e.setAttribute("id","toast"),e.classList.add("toast-container","position-fixed","bottom-0","start-50","translate-middle-x"),document.querySelector("body").insertAdjacentElement("beforeend",e),this.body=document.querySelector("#toast")}}},{key:"showToast",value:function(e){var t=e.message,n=e.delay,i=document.createElement("toast-item");i.setAttribute("toast-message",t),i.setAttribute("toast-delay",n),this.body.insertAdjacentElement("beforeend",i)}}])&&Ii(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),a}(Ri(HTMLElement));n(684),customElements.define("asset-list",z),customElements.define("asset-file",D),customElements.define("asset-folder",B),customElements.define("asset-browser",J),customElements.define("asset-upload-drop",oe),customElements.define("element-timeline",je),customElements.define("element-timeline-cursor",Ie),customElements.define("element-timeline-ruler",qe),customElements.define("element-timeline-range",Re),customElements.define("element-timeline-end",Me),customElements.define("element-timeline-scroll",_e),customElements.define("element-bar",Ge),customElements.define("element-control",rt),customElements.define("element-control-asset",ot),customElements.define("drag-alignment-guide",at),customElements.define("keyframe-editor",mt),customElements.define("menu-dropdown-body",Lt),customElements.define("menu-dropdown-item",jt),customElements.define("animation-panel",Ft),customElements.define("animation-panel-item",Gt),customElements.define("option-group",Zt),customElements.define("option-text",cn),customElements.define("option-image",vn),customElements.define("option-video",On),customElements.define("option-audio",An),customElements.define("input-text",Un),customElements.define("select-font",$n),customElements.define("tutorial-group",ci),customElements.define("tutorial-popover",vi),customElements.define("toast-item",Pi),customElements.define("toast-box",Ni)})(),NUGGET=i})();